<div class="container-fluid">
  <div class="row" [formGroup]="Form">
    <div class="col-lg-8">
      <div class="card">
        <div class="card-body">
          <div class="container-fluid d-flex justify-content-between header">
            <div class="col-lg-8 ps-0">
              <a routerLink="." class="nobleui-logo d-block mt-3">Hazard & Risk<span>
                  Management</span></a>
              <h6 class="  pb-4"># {{Form.value.reference_number}}</h6>
            </div>
            <div class="col-lg-4 pe-0">
              <h6 class="fw-bold text-end mt-4 mb-2">Reported Date</h6>
              <h6 class="text-end mb-5 pb-4">{{Form.value.reported_date| date:'MMM d, y'}}</h6>
            </div>
          </div>
          <div class="container-fluid  d-flex justify-content-center w-100">
            <div class="table-responsive w-100">
              <div class="row ">
                <mat-tab-group mat-align-tabs="start">
                  <mat-tab>
                    <ng-template mat-tab-label>
                      <mat-icon class="example-tab-icon">article</mat-icon>
                      Hazard / Risk Details
                    </ng-template>
                    <div class="row ">
                      <div class="col-md-6">
                        <mat-form-field appearance="outline">
                          <mat-label>Category</mat-label>
                          <input type="text" formControlName="category" matInput>
                          <mat-error>Required Field</mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-md-6">
                        <mat-form-field appearance="outline">
                          <mat-label>Sub Category</mat-label>
                          <input type="text" formControlName="sub_category" matInput>
                          <mat-error>Required Field</mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row">
                      <div *ngIf="Form.controls['observation'].value" class="col-md-12">
                        <div class="selected-observation">
                          <strong>Observation:</strong> {{ Form.controls['observation'].value }}
                        </div>
                      </div>
                    </div>
                    <div class="row ">
                      <div class="col-md-6">
                        <mat-form-field appearance="outline">
                          <mat-label>Division</mat-label>
                          <input type="text" formControlName="division" matInput>
                          <mat-error>Required Field</mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-md-6">
                        <mat-form-field appearance="outline">
                          <mat-label>Location / Department</mat-label>
                          <input type="text" formControlName="location_department" matInput>
                          <mat-error>Required Field</mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row ">
                      <div class="col-md-6">
                        <mat-form-field appearance="outline">
                          <mat-label>Sub Location</mat-label>
                          <input type="text" formControlName="sub_location" matInput>
                          <mat-error>Required Field</mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row mb-4">
                      <quill-editor placeholder="Description" [modules]="quillConfig" formControlName="description">
                      </quill-editor>
                    </div>
                    <!-- <div class="row mb-4">
                        <div class="mb-3 mt-3">
                          <img [src]="Form.value.evidence_before" class="evidenceImg">
                        </div>
                      </div> -->
                    <div class="row">
                      <h6 class="mb-3">Evidence</h6>
                    </div>
                    <div class="row image">
                      <a href="" (click)="false" class="col-md-2 ps-1 pe-1"
                        *ngFor="let image of evidences; let i=index">
                        <figure class="mb-2">
                          <img class="img-fluid rounded" [src]="image.src" (click)="open(i)" width="150" alt="">
                        </figure>
                      </a>
                    </div>

                    <div class="row">
                      <h6 class="mb-3">More Evidences</h6>
                    </div>

                    <div class="row image">
                      <a href="" (click)="false" class="col-md-2 ps-1 pe-1"
                        *ngFor="let image of moreFiles; let i=index">
                        <figure class="mb-2">
                          <img class="img-fluid rounded" [src]="image.src" (click)="openMore(i)" width="150" alt="">
                        </figure>
                      </a>
                    </div>

                  </mat-tab>
                  <mat-tab>
                    <ng-template mat-tab-label>
                      <mat-icon class="example-tab-icon">bolt</mat-icon>
                      Resolution Details
                    </ng-template>
                    <div class="row mb-4">
                      <div class="col-md-6">
                        <mat-form-field appearance="outline">
                          <mat-label>Control</mat-label>
                          <input type="text" formControlName="control" matInput>
                          <mat-error>Required Field</mat-error>
                        </mat-form-field>
                      </div>
                      <div class="col-md-6">
                        <mat-form-field appearance="outline">
                          <mat-label>Cost</mat-label>
                          <input type="text" matInput placeholder="Please provide the cost" formControlName="cost"
                            OnlyNumber="true">
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row mb-5">
                      <quill-editor placeholder="Action taken" [modules]="quillConfig" formControlName="action_taken">
                      </quill-editor>
                    </div>
                    <div class="row mb-5">
                      <quill-editor placeholder="Remarks" [modules]="quillConfig" formControlName="remarks">
                      </quill-editor>
                    </div>
                    <div class="row">
                      <h6 class="mb-3">Evidence</h6>
                    </div>
                    <div class="row">
                      <a href="" (click)="false" class="col-md-2 ps-1 pe-1"
                        *ngFor="let image of evidenceAfter; let i=index">
                        <figure class="mb-2">
                          <img class="img-fluid rounded" [src]="image.src" (click)="openEvidenceAfter(i)" width="150"
                            alt="">
                        </figure>
                      </a>
                    </div>

                    <div class="row">
                      <h6 class="mb-3">More Evidences</h6>
                    </div>

                    <div class="row image">
                      <a href="" (click)="false" class="col-md-2 ps-1 pe-1"
                        *ngFor="let image of moreFilesAfter; let i=index">
                        <figure class="mb-2">
                          <img class="img-fluid rounded" [src]="image.src" (click)="openMoreAfter(i)" width="150"
                            alt="">
                        </figure>
                      </a>
                    </div>

                  </mat-tab>

                  <mat-tab *ngIf="Form.get('reject_reason')?.value">

                    <ng-template mat-tab-label>
                      <mat-icon class="example-tab-icon">bolt</mat-icon>
                      Rejection Details
                    </ng-template>

                    <div class="row">
                      <h6 class="mb-3">Rejection reason</h6>
                    </div>

                    <div class="row mb-5">
                      <quill-editor placeholder="Reject Reason" [modules]="quillConfig" formControlName="reject_reason">
                      </quill-editor>
                    </div>
                    <div *ngIf="Form.get('rework_description')?.value">
                      <div class="row">
                        <h6 class="mb-3">Rework Description</h6>
                      </div>
                      <div class="row mb-5">
                        <quill-editor placeholder="Remarks" [modules]="quillConfig"
                          formControlName="rework_description">
                        </quill-editor>
                      </div>
                    </div>
                    <!-- <div class="mb-3" *ngIf="actionForm.value.status !== 'Open'">
                      <label class="btn btn-secondary btn-icon-text">
                          <input type="file" (change)="handleFileInput($event)"/>
                          <i class="feather icon-paperclip btn-icon-prepend"></i> Attach Evidence
                      </label>
                  </div>
                    <div class="mb-3">
                      <img [src]="resolutionForm.value.evidence" class="evidenceImg">
                    </div> -->
                    <!-- <div class="mb-3" *ngIf="actionForm.value.status==='In-Progress'">
                      <button type="button" class="btn btn-primary btn-icon-text float-end mt-4 mr-5"
                        (click)="submit()">
                        <i class="feather icon-send btn-icon-prepend"></i>
                        Save
                      </button>
                    </div> -->
                  </mat-tab>
                </mat-tab-group>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="card">
        <div class="card-body">
          <div class="mt-3">
            <button [disabled]="Form.value.status==='Completed'" class="btn btn-primary" mat-icon-button
              aria-label="Example icon-button with a menu">
              {{Form.value.status}}

            </button>

            <button (click)="navigate()" class="btn btn-success status-btn" mat-icon-button
              aria-label="Example icon-button with a menu">
              <i class="feather icon-chevron-left"></i> Back to History

            </button>



          </div>
          <div class="mt-3">
            <label class="tx-11 fw-bolder mb-0 text-uppercase">Reported By:</label>
            <p class="text-muted">{{Form.value.reporter_name}}, {{Form.value.reporter_designation}}</p>
          </div>
          <div class="mt-3">
            <label class="tx-11 fw-bolder mb-0 text-uppercase">Assigned to:</label>
            <p class="text-muted">{{Form.value.assignee_name}}, {{Form.value.assignee_designation}}</p>
          </div>
          <div class="mt-3" *ngIf="Form.value.deligate_name">
            <label class="tx-11 fw-bolder mb-0 text-uppercase">Deligate:</label>
            <p class="text-muted">{{Form.value.deligate_name}}, {{Form.value.deligate_designation}}</p>
          </div>
          <div class="mt-3">
            <label class="tx-11 fw-bolder mb-0 text-uppercase">Risk Level:</label><br>
            <mat-button-toggle-group name="fontStyle" aria-label="Font Style" formControlName="level">
              <mat-button-toggle value="High">High</mat-button-toggle>
              <mat-button-toggle value="Medium">Medium</mat-button-toggle>
              <mat-button-toggle value="Low">Low</mat-button-toggle>
            </mat-button-toggle-group>
          </div>
          <div class="mt-3">
            <label class="tx-11 fw-bolder mb-0 text-uppercase"></label><br>
            <mat-button-toggle-group name="fontStyle" aria-label="Font Style" formControlName="unsafe"
              #group="matButtonToggleGroup">
              <mat-button-toggle value="Unsafe Act">Unsafe Act</mat-button-toggle>
              <mat-button-toggle value="Unsafe Condition">Unsafe Condition</mat-button-toggle>
            </mat-button-toggle-group>
          </div>
          <div class="mt-3">
            <mat-form-field appearance="outline" color="primary">
              <mat-label>Due Date</mat-label>
              <input matInput [matDatepicker]="dp" [formControl]="duedate">
              <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
              <mat-datepicker #dp></mat-datepicker>
            </mat-form-field>
            <mat-form-field appearance="outline" color="primary">
              <mat-label>Targeted Completion Date:</mat-label>
              <input matInput [matDatepicker]="targeteddate" [formControl]="targetedDate">
              <mat-datepicker-toggle matSuffix [for]="targeteddate"></mat-datepicker-toggle>
              <mat-datepicker #targeteddate></mat-datepicker>
              <mat-error>Required field</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" color="primary">
              <mat-label>Completed Date:</mat-label>
              <input matInput [matDatepicker]="completeddate" [formControl]="completedDate">
              <mat-datepicker-toggle matSuffix [for]="completeddate"></mat-datepicker-toggle>
              <mat-datepicker #completeddate></mat-datepicker>
              <mat-error>Required field</mat-error>
            </mat-form-field>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>