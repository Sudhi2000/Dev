<div class="container-fluid">
    <div class="row" [formGroup]="Form">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-body">
                    <div class="container-fluid d-flex justify-content-between header">
                        <div class="col-lg-8 ps-0">
                            <a routerLink="." class="nobleui-logo d-block mt-3">Internal<span>
                                    Audit</span></a>
                            <p class="mt-1 mb-1"><b>View Action plan</b></p>
                        </div>
                        <div class="col-lg-4 pe-0">
                            <h6 class="fw-bold text-end mt-4 mb-2">Reported Date</h6>
                            <h6 class="text-end  ">{{Form.value.date| date:'MMM d, y'}}</h6>
                        </div>
                    </div>
                    <div class="container-fluid  d-flex justify-content-center w-100">
                        <div class="table-responsive w-100">
                            <div class="row">
                                <p class="mt-1">Findings</p>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-12">
                                    <quill-editor placeholder="Please provide your findings" [modules]="quillConfig"
                                        formControlName="findings">
                                    </quill-editor>
                                </div>
                            </div>

                            <div class="row mt-3" *ngIf="Form.value.status !== 'Open'">
                                <p class="mt-1 mb-1">Recommendation for sustainable solution</p>

                            </div>

                            <div class="row mt-3" *ngIf="Form.value.status !== 'Open'">
                                <div class="col-md-12">
                                    <quill-editor placeholder="Recommendation for sustainable solution"
                                        [modules]="quillConfig" formControlName="sustainable_solution">
                                    </quill-editor>
                                </div>
                            </div>

                            <div class="row mt-3" *ngIf="Form.value.status !== 'Open'">
                                <p class="mt-1 mb-1">Recommendations For Root Cause?</p>

                            </div>

                            <div class="row mt-3" *ngIf="Form.value.status !== 'Open'">
                                <div class="col-md-12">
                                    <quill-editor placeholder="Recommendations For Root Cause?" [modules]="quillConfig"
                                        formControlName="root_cause">
                                    </quill-editor>
                                </div>
                            </div>

                            <div class="row mt-3" *ngIf="Form.value.status !== 'Open'">
                                <p class="mt-1 mb-1">Barriers/Challenges</p>

                            </div>

                            <div class="row mt-3" *ngIf="Form.value.status !== 'Open'">
                                <div class="col-md-12">
                                    <quill-editor placeholder="Please recommend any barriers/challenges"
                                        [modules]="quillConfig" formControlName="barrier_challenges">
                                    </quill-editor>
                                </div>
                            </div>

                            <div class="row mt-3" *ngIf="Form.value.status !== 'Open'">
                                <p class="mt-1 mb-1">Assignee Action Plan</p>

                            </div>

                            <div class="row mt-3" *ngIf="Form.value.status !== 'Open'">
                                <div class="col-md-12">
                                    <quill-editor placeholder="Remarks" [modules]="quillConfig"
                                        formControlName="assignee_remark">
                                    </quill-editor>
                                </div>
                            </div>

                            <div class="row mt-3"
                                *ngIf="Form.value.status === 'Approved'|| Form.value.status === 'Implemented' || Form.value.status === 'Rejected'|| Form.value.status === 'Completed' || Form.value.status === 'Under Implementation'">
                                <p class="mt-1 mb-1">Approver Remarks</p>

                            </div>

                            <div class="row mt-3"
                                *ngIf="Form.value.status === 'Approved'|| Form.value.status === 'Implemented' || Form.value.status === 'Rejected'|| Form.value.status === 'Completed' || Form.value.status === 'Under Implementation'">
                                <div class="col-md-12">
                                    <quill-editor placeholder="Approver Remarks" [modules]="quillConfig"
                                        formControlName="approver_remark">
                                    </quill-editor>
                                </div>
                            </div>
                            <div class="row mt-3"
                                *ngIf=" Form.value.status === 'Implemented' || Form.value.status === 'Rejected'|| Form.value.status === 'Completed' || Form.value.status === 'Under Implementation'">
                                <p class="mt-1 mb-1">Implemented Actions</p>

                            </div>

                            <div class="row mt-3"
                                *ngIf=" Form.value.status === 'Implemented' || Form.value.status === 'Rejected'|| Form.value.status === 'Completed' || Form.value.status === 'Under Implementation'">
                                <div class="col-md-12">
                                    <quill-editor placeholder=" Implemented Actions" [modules]="quillConfig"
                                        formControlName="implemented_actions">
                                    </quill-editor>
                                </div>
                            </div>
                            <div class="row mt-3"
                                *ngIf=" Form.value.status === 'Implemented' || Form.value.status === 'Rejected'|| Form.value.status === 'Completed' || Form.value.status === 'Under Implementation'">
                                <p class="mt-1 mb-1"> Lessons Learned</p>

                            </div>

                            <div class="row mt-3"
                                *ngIf=" Form.value.status === 'Implemented' || Form.value.status === 'Rejected'|| Form.value.status === 'Completed' || Form.value.status === 'Under Implementation'">
                                <div class="col-md-12">
                                    <quill-editor placeholder="Lessons Learned" [modules]="quillConfig"
                                        formControlName="lessons_learned">
                                    </quill-editor>
                                </div>
                            </div>

                            <div class="col-md-12" *ngIf="Form.value.evidence!==0">
                                <div class="row mt-3">
                                    <p class="mt-1 mb-1" *ngIf="evidence_Before">Evidence Before</p>

                                </div>
                                <div class="custom-dropzone-container">
                                    <div *ngFor="let file of DocumentFiles; let i = index;" class="custom-dropzone">
                                        <ngx-dropzone-preview ngProjectAs="ngx-dropzone-preview" [file]="file"
                                            (click)="openDocument(i); $event.stopPropagation();">
                                            <ngx-dropzone-label class="preview-text">
                                                <div class="preview-text">{{ file.name }}</div>
                                            </ngx-dropzone-label>
                                        </ngx-dropzone-preview>
                                    </div>
                                </div>

                            </div>

                            <div class="col-md-12">
                                
                                <div class="custom-dropzone-container">
                                    <div *ngFor="let file of MultipleDoumentBeforeFiles; let i = index;"
                                        class="custom-dropzone">
                                        <ngx-dropzone-preview ngProjectAs="ngx-dropzone-preview" [file]="file"
                                            (click)="openmultipleBeforeDocument(i); $event.stopPropagation();">
                                            <ngx-dropzone-label class="preview-text">
                                                <div class="preview-text">{{ file.name }}</div>
                                            </ngx-dropzone-label>
                                        </ngx-dropzone-preview>
                                    </div>
                                </div>


                            </div>

                            <div class="col-md-12" *ngIf="Form.value.evidence_after!==0">
                                <div class="row mt-3">
                                    <p class="mt-1 mb-1" *ngIf="evidence_After">Evidence After</p>

                                </div>
                                <div class="custom-dropzone-container">
                                    <div *ngFor="let file of evidenceAfterFiles; let i = index;"
                                        class="custom-dropzone">
                                        <ngx-dropzone-preview ngProjectAs="ngx-dropzone-preview" [file]="file"
                                            (click)="openEvidenceAfter(i); $event.stopPropagation();">
                                            <ngx-dropzone-label class="preview-text">
                                                <div class="preview-text">{{ file.name }}</div>
                                            </ngx-dropzone-label>
                                        </ngx-dropzone-preview>
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-12">
                                <div class="row mt-3">
                                    <p class="mt-1 mb-1" *ngIf="multiple_evidence_After">Multiple Evidence After</p>

                                </div>

                                <div class="custom-dropzone-container">
                                    <div *ngFor="let file of MultipleDoumentAfterFiles; let i = index;"
                                        class="custom-dropzone">
                                        <ngx-dropzone-preview ngProjectAs="ngx-dropzone-preview" [file]="file"
                                            (click)="openmultipleEvidenceAfter(i); $event.stopPropagation();">
                                            <ngx-dropzone-label class="preview-text">
                                                <div class="preview-text">{{ file.name }}</div>
                                            </ngx-dropzone-label>
                                        </ngx-dropzone-preview>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>

                    <!-- <div class="row mt-3">
                        <button type="button" class="btn btn-icon-text btn-outline-twitter"
                            (click)="view_action_plan_document()" *ngIf="Form.value.document_id">
                            <i class="feather icon-file-text btn-icon-prepend"></i>
                            Download Action Plan Evidence
                        </button>
                    </div>
                    <div class="row mt-3">
                        <button type="button" class="btn btn-icon-text btn-outline-twitter"
                            (click)="view_action_plan_after_document()" *ngIf="Form.value.document_id_after">
                            <i class="feather icon-file-text btn-icon-prepend"></i>
                            Download Action Plan Evidence After
                        </button>
                    </div> -->
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="card">
                <div class="card-body">
                    <!-- <div class="mt-3">
                        <div class="btn-group">
                            <div class="btn-group" ngbDropdown role="group">
                                <button class="btn btn-primary dropdown-toggle-split"
                                    ngbDropdownToggle>{{Form.value.status}}</button>
                                <div ngbDropdownMenu>
                                    <button ngbDropdownItem (click)="action('Completed')" [disabled]="!Form.valid">Completed</button>
                                </div>
                            </div>
                        </div>
                    </div> -->
                    <div class="mt-3" *ngIf="Form.value.audstatus==='Completed'">
                        <button class="btn btn-secondary back-button" aria-label="Example icon-button with a menu"
                            (click)="go_back()">
                            Go Back
                        </button>
                    </div>
                    <div class="mt-3" *ngIf="Form.value.audstatus==='Approved'">
                        <button class="btn btn-secondary back-button" aria-label="Example icon-button with a menu"
                            (click)="go_back_audit()">
                            Go Back
                        </button>

                    </div>
                    <div>
                        <button class="btn btn-success status-btn " mat-icon-button
                            aria-label="Example icon-button with a menu" (click)="navigate()">
                            <i class="feather icon-chevron-left"></i> Back to History

                        </button>
                    </div>


                    <div class="mt-3">
                        <label class="tx-11 fw-bolder mb-0 text-uppercase">Severity:</label>
                        <p class="text-muted">{{Form.value.priority}}</p>
                    </div>
                    <div class="mt-3">
                        <mat-form-field appearance="outline"
                            *ngIf="Form.value.status === 'Open' || Form.value.status === 'Under Review'">
                            <mat-label>Assignee</mat-label>
                            <input type="text" matInput formControlName="assignee">
                            <mat-error>Required Field</mat-error>
                        </mat-form-field>
                        <mat-form-field appearance="outline" color="primary">
                            <mat-label>Due Date</mat-label>
                            <input matInput [matDatepicker]="dueDatedp" placeholder="Choose a date"
                                [formControl]="dueDate">
                            <mat-datepicker-toggle matSuffix [for]="dueDatedp"></mat-datepicker-toggle>
                            <mat-datepicker #dueDatedp></mat-datepicker>
                            <mat-error>Required Field</mat-error>
                        </mat-form-field>
                        <mat-form-field appearance="outline" color="primary" *ngIf="Form.value.status !== 'Open'">
                            <mat-label>Target Completion Date</mat-label>
                            <input matInput [matDatepicker]="tarComDatedp" placeholder="Choose a date"
                                [formControl]="TargDatedp">
                            <mat-datepicker-toggle matSuffix [for]="tarComDatedp"></mat-datepicker-toggle>
                            <mat-datepicker #tarComDatedp></mat-datepicker>
                            <mat-error>Required Field</mat-error>
                        </mat-form-field>
                        <mat-form-field fxFlex appearance="outline" color="primary"
                            *ngIf="Form.value.status !== 'Open'">
                            <mat-label>Hierarchy of Control</mat-label>
                            <mat-select formControlName="heirarchy_control">
                                <mat-option *ngFor="let value of heirarchy_dropdown" value="{{value}}">
                                    {{value}}</mat-option>
                            </mat-select>
                            <mat-error>Required Field</mat-error>
                        </mat-form-field>
                        <mat-form-field fxFlex appearance="outline" color="primary"
                            *ngIf="Form.value.status !== 'Open'">
                            <mat-label>Approver</mat-label>
                            <input type="text" matInput formControlName="approver">
                            <mat-error>Required Field</mat-error>
                        </mat-form-field>
                        <mat-form-field appearance="outline" color="primary" *ngIf="Form.value.status === 'Completed'">
                            <mat-label>Actual Completion Date</mat-label>
                            <input matInput [matDatepicker]="acComDatedp" placeholder="Choose a date"
                                [formControl]="comDatedp">
                            <mat-datepicker-toggle matSuffix [for]="acComDatedp"></mat-datepicker-toggle>
                            <mat-datepicker #acComDatedp></mat-datepicker>
                            <mat-error>Required Field</mat-error>
                        </mat-form-field>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>