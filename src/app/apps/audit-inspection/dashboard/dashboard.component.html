<div class="container-fluid" id="dashboard">
    <div class="row">
        <div class="col-md-12">
            <ul class="list-group">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <a routerLink="." class="nobleui-logo d-block ">Audit & Inspection <span>
                            Management</span></a>
                    <span class="badge ">
                        <form class="d-flex my-2 my-lg-0" [formGroup]="filterForm">
                            <div class="input-group  me-2 mb-2 mb-md-0">
                                <mat-form-field appearance="outline" color="primary" id="dashboard">
                                    <mat-label>Enter a date range</mat-label>
                                    <mat-date-range-input [formGroup]="dateRange" [rangePicker]="picker">
                                        <input matStartDate formControlName="start" placeholder="Start date"
                                            (dateChange)="startDateChange($event)">
                                        <input matEndDate formControlName="end" placeholder="End date"
                                            (dateChange)="endDateChange($event)">
                                    </mat-date-range-input>
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-date-range-picker #picker></mat-date-range-picker>
                                    <mat-error *ngIf="dateRange.controls.start.hasError('matStartDateInvalid')">Invalid
                                        start date</mat-error>
                                    <mat-error *ngIf="dateRange.controls.end.hasError('matEndDateInvalid')">Invalid end
                                        date
                                    </mat-error>
                                </mat-form-field>

                            </div>

                            <div class="input-group  me-2 mb-2 mb-md-0">
                                <mat-form-field fxFlex appearance="outline">
                                    <mat-label>Division</mat-label>
                                    <mat-select formControlName="division">
                                        <mat-option [value]="data.attributes.division_name"
                                            *ngFor="let data of divisions">{{data.attributes.division_name}}
                                        </mat-option>
                                    </mat-select>
                                    <mat-error>Required Field</mat-error>
                                </mat-form-field>
                            </div>



                            <div class="input-group  me-2 mb-2 mb-md-0">
                                <button type="button" class="btn btn-primary btn-icon" (click)="search()">
                                    <i class="feather icon-search btn-icon-prepend"></i>
                                </button>

                            </div>

                            <div class="input-group  me-2 mb-2 mb-md-0">

                                <button type="button" class="btn btn-danger btn-icon" (click)="reset()">
                                    <i class="feather icon-rotate-cw btn-icon-prepend"></i>
                                </button>
                            </div>
                        </form>
                    </span>
                </li>
            </ul>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col-12 col-xl-12 stretch-card">
            <div class="row flex-grow-1">
                <div class="col-md-2-5 grid-margin stretch-card" *ngFor="let data of summaryCardData">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-baseline">
                                <h5 class=" mb-2">{{data.title}}</h5>
                            </div>
                            <div class="row">
                                <div class="col-6 col-md-12 col-xl-5 value">
                                    <h3 class="mb-2">{{data.value}}</h3>
                                    <div class="d-flex align-items-baseline">
                                        <p class="{{data.attri_bg}}">
                                            <span>{{data.attrition}}</span>
                                            <i class="feather {{data.attri_icon}} icon-sm mb-1"></i>
                                        </p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-12 col-xl-7 icon">
                                    <div class=" mt-xl-0">
                                        <img src="../../../../assets/images/audit/{{data.icon}}" width="60">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-xl-4">
            <div class="card gender-card">
                <div class="card-body">
                    <h4 class="card-title mb-4">Marks</h4>
                    <div>
                        <apx-chart class="apex-charts" dir="ltr" [series]="markChart.series" [chart]="markChart.chart"
                            [colors]="markChart.colors" [plotOptions]="markChart.plotOptions"
                            [legend]="markChart.legend" [labels]="markChart.labels">
                        </apx-chart>
                    </div>
                    <div class="row mb-3">
                        <div class="col-12 d-flex justify-content-center">
                            <div class="markPer">
                                <label class="d-flex align-items-center  tx-10 text-uppercase fw-bold "><span
                                        class="p-1 ms-1 rounded-circle bg-primary"></span>Social </label>
                                <h5 class="fw-bolder mb-0 text-end">{{socialMark}}</h5>
                            </div>
                            <div class="markPer">
                                <label class="d-flex align-items-center tx-10 text-uppercase fw-bold "><span
                                        class="p-1 me-1 rounded-circle bg-success"></span> Health</label>
                                <h5 class="fw-bolder mb-0">{{healthMark}}</h5>
                            </div>
                            <div class="markPer">
                                <label class="d-flex align-items-center tx-10 text-uppercase fw-bold"><span
                                        class="p-1 me-1 rounded-circle bg-danger"></span> Environment</label>
                                <h5 class="fw-bolder mb-0">{{envMark}}</h5>
                            </div>
                            <div class="markPer">
                                <label class="d-flex align-items-center tx-10 text-uppercase fw-bold"><span
                                        class="p-1 me-1 rounded-circle bg-warning"></span> Security</label>
                                <h5 class="fw-bolder mb-0">{{secMark}}</h5>
                            </div>
                            <div class="markPer">
                                <label class="d-flex align-items-center tx-10 text-uppercase fw-bold"><span
                                        class="p-1 me-1 rounded-circle bg-low"></span> Management System</label>
                                <h5 class="fw-bolder mb-0">{{mngMark}}</h5>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-8">
            <div class="card gender-card">
                <div class="card-body">
                    <h4 class="card-title mb-4">Division</h4>
                    <div>
                        <apx-chart [series]="divisionChart.series" [chart]="divisionChart.chart"
                            [dataLabels]="divisionChart.dataLabels" [plotOptions]="divisionChart.plotOptions"
                            [legend]="divisionChart.legend" [fill]="divisionChart.fill" [stroke]="divisionChart.stroke"
                            [tooltip]="divisionChart.tooltip" [xaxis]="divisionChart.xaxis"></apx-chart>
                    </div>

                </div>
            </div>
        </div>

    </div>

    <div class="row mt-3">
        <div class="col-xl-12">
            <div class="card gender-card">
                <div class="card-body">
                    <h4 class="card-title mb-4">Monthly Score</h4>
                    <div>
                        <apx-chart class="apex-charts" dir="ltr" [series]="monthlyScoreChart.series" [chart]="monthlyScoreChart.chart"
                            [colors]="monthlyScoreChart.colors" [stroke]="monthlyScoreChart.stroke" [dataLabels]="monthlyScoreChart.dataLabels"
                            [xaxis]="monthlyScoreChart.xaxis">
                            </apx-chart>
                    </div>

                </div>

            </div>

        </div>
    </div>


    <div class="row mt-4">
        <div class="col-lg-7  grid-margin stretch-card">
            <div class="card custom-height" [perfectScrollbar]>
                <div class="card-body custom-height" [perfectScrollbar]>
                    <div class="d-flex justify-content-between align-items-baseline mb-2">
                        <h6 class="card-title mb-0">Findings</h6>
                    </div>
                    <ul ngbNav #categoryNav="ngbNav" [activeId]="1" class="nav-pills bg-light rounded mt-3">
                        <li [ngbNavItem]="1">
                            <a ngbNavLink>Overview</a>
                            <ng-template ngbNavContent>
                                <div class="table-responsive mt-4 route-cause">
                                    <table class="table table-centered mb-0">
                                        <tbody>
                                            <tr *ngFor="let data of findingsCardData | callback: filterCategory">
                                                <td>
                                                    <h5 class="font-size-14 mb-1">{{data.title}}</h5>
                                                    <p class="text-muted mb-0">In Audit & Inspection</p>
                                                </td>
                                                <td>
                                                    <apx-chart [series]="[data.percentage]" [chart]="radialChart.chart"
                                                        [plotOptions]="radialChart.plotOptions"
                                                        [labels]="radialChart.labels">
                                                    </apx-chart>
                                                </td>
                                                <td>
                                                    <p class="text-muted mb-1">Count</p>
                                                    <h5 class="mb-0">{{data.count}}</h5>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </ng-template>
                        </li>
                        <li [ngbNavItem]="2">
                            <a ngbNavLink>Social</a>
                            <ng-template ngbNavContent>
                                <div class="table-responsive mt-4 route-cause">
                                    <table class="table table-centered mb-0">
                                        <tbody>
                                            <tr *ngFor="let data of findingsCardData | callback: filterSocialCategory">
                                                <td>
                                                    <h5 class="font-size-14 mb-1">{{data.title}}</h5>
                                                    <p class="text-muted mb-0">In Audit & Inspection</p>
                                                </td>
                                                <td>
                                                    <apx-chart [series]="[data.percentage]" [chart]="radialChart.chart"
                                                        [plotOptions]="radialChart.plotOptions"
                                                        [labels]="radialChart.labels">
                                                    </apx-chart>
                                                </td>
                                                <td>
                                                    <p class="text-muted mb-1">Count</p>
                                                    <h5 class="mb-0">{{data.count}}</h5>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </ng-template>
                        </li>
                        <li [ngbNavItem]="3">
                            <a ngbNavLink>Health & Safety</a>
                            <ng-template ngbNavContent>
                                <div class="table-responsive mt-4 route-cause">
                                    <table class="table table-centered mb-0">
                                        <tbody>
                                            <tr *ngFor="let data of findingsCardData | callback: filterHealthCategory">
                                                <td>
                                                    <h5 class="font-size-14 mb-1">{{data.title}}</h5>
                                                    <p class="text-muted mb-0">In Audit & Inspection</p>
                                                </td>
                                                <td>
                                                    <apx-chart [series]="[data.percentage]" [chart]="radialChart.chart"
                                                        [plotOptions]="radialChart.plotOptions"
                                                        [labels]="radialChart.labels">
                                                    </apx-chart>
                                                </td>
                                                <td>
                                                    <p class="text-muted mb-1">Count</p>
                                                    <h5 class="mb-0">{{data.count}}</h5>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </ng-template>
                        </li>
                        <li [ngbNavItem]="4">
                            <a ngbNavLink>Environmental</a>
                            <ng-template ngbNavContent>
                                <div class="table-responsive mt-4 route-cause">
                                    <table class="table table-centered mb-0">
                                        <tbody>
                                            <tr *ngFor="let data of findingsCardData | callback: filterEnvCategory">
                                                <td>
                                                    <h5 class="font-size-14 mb-1">{{data.title}}</h5>
                                                    <p class="text-muted mb-0">In Audit & Inspection</p>
                                                </td>
                                                <td>
                                                    <apx-chart [series]="[data.percentage]" [chart]="radialChart.chart"
                                                        [plotOptions]="radialChart.plotOptions"
                                                        [labels]="radialChart.labels">
                                                    </apx-chart>
                                                </td>
                                                <td>
                                                    <p class="text-muted mb-1">Count</p>
                                                    <h5 class="mb-0">{{data.count}}</h5>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </ng-template>
                        </li>
                        <li [ngbNavItem]="5">
                            <a ngbNavLink>Security</a>
                            <ng-template ngbNavContent>
                                <div class="table-responsive mt-4 route-cause">
                                    <table class="table table-centered mb-0">
                                        <tbody>
                                            <tr *ngFor="let data of findingsCardData | callback: filterSecCategory">
                                                <td>
                                                    <h5 class="font-size-14 mb-1">{{data.title}}</h5>
                                                    <p class="text-muted mb-0">In Audit & Inspection</p>
                                                </td>
                                                <td>
                                                    <apx-chart [series]="[data.percentage]" [chart]="radialChart.chart"
                                                        [plotOptions]="radialChart.plotOptions"
                                                        [labels]="radialChart.labels">
                                                    </apx-chart>
                                                </td>
                                                <td>
                                                    <p class="text-muted mb-1">Count</p>
                                                    <h5 class="mb-0">{{data.count}}</h5>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </ng-template>
                        </li>
                        <li [ngbNavItem]="6">
                            <a ngbNavLink>Management System</a>
                            <ng-template ngbNavContent>
                                <div class="table-responsive mt-4 route-cause">
                                    <table class="table table-centered mb-0">
                                        <tbody>
                                            <tr *ngFor="let data of findingsCardData | callback: filterMngCategory">
                                                <td>
                                                    <h5 class="font-size-14 mb-1">{{data.title}}</h5>
                                                    <p class="text-muted mb-0">In Audit & Inspection</p>
                                                </td>
                                                <td>
                                                    <apx-chart [series]="[data.percentage]" [chart]="radialChart.chart"
                                                        [plotOptions]="radialChart.plotOptions"
                                                        [labels]="radialChart.labels">
                                                    </apx-chart>
                                                </td>
                                                <td>
                                                    <p class="text-muted mb-1">Count</p>
                                                    <h5 class="mb-0">{{data.count}}</h5>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </ng-template>
                        </li>
                    </ul>
                    <div [ngbNavOutlet]="categoryNav" class="mt-4"></div>
                </div>
            </div>
        </div>

        <div class="col-lg-5 col-xl-5 grid-margin stretch-card">
            <div class="card" *ngFor="let data of actionCardData">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-baseline mb-2">
                        <h6 class="card-title mb-0">Audit Action</h6>
                    </div>
                    <apx-chart [series]="[data.comPercentage]" [chart]="auditChart.chart"
                        [plotOptions]="auditChart.plotOptions" [labels]="auditChart.labels"></apx-chart>
                    <div class="row mb-3">
                 
                        <div class="col-12 status">
                            <div>
                                <label class="align-items-center tx-10 text-uppercase fw-bold status-label">This Month</label>
                                <h5 class="fw-bolder mb-0">{{data.completed}} Cases</h5>
                            </div>
                        </div>
                    </div>
                    <div class="d-grid text-center">
                        <p class="text-success">
                            <span>{{data.attrition}}</span>
                            <i class="feather {{data.attritionIcon}} icon-sm mb-1"></i> From
                            Previous Period
                        </p>
                    </div>
                </div>
            </div>
        </div>

        
    </div>

    <div class="row mt-3">
        <div class="col-lg-5  grid-margin stretch-card">
            <div class="card custom-height" [perfectScrollbar]>
                <div class="card-body custom-height" [perfectScrollbar]>
                    <div class="d-flex justify-content-between align-items-baseline mb-2">
                        <h6 class="card-title mb-0">Sub Category</h6>
                    </div>
                    <ul ngbNav #subCategoryNav="ngbNav" [activeId]="1" class="nav-pills bg-light rounded mt-3">
                        <li [ngbNavItem]="1">
                            <a ngbNavLink>Overview</a>
                            <ng-template ngbNavContent>
                                <div class="table-responsive mt-4 route-cause">
                                    <table class="table table-centered mb-0">
                                        <tbody>
                                            <tr *ngFor="let data of subCategoryCardData | callback: filterSubCategory">
                                                <td>
                                                    <h5 class="font-size-14 mb-1">{{data.title}}</h5>
                                                    <p class="text-muted mb-0">In Audit & Inspection</p>
                                                </td>
                                                <td>
                                                    <apx-chart [series]="[data.percentage]" [chart]="radialChart.chart"
                                                        [plotOptions]="radialChart.plotOptions"
                                                        [labels]="radialChart.labels">
                                                    </apx-chart>
                                                </td>
                                                <td>
                                                    <p class="text-muted mb-1">Count</p>
                                                    <h5 class="mb-0">{{data.count}}</h5>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </ng-template>
                        </li>
                        <li [ngbNavItem]="2">
                            <a ngbNavLink>Social</a>
                            <ng-template ngbNavContent>
                                <div class="table-responsive mt-4 route-cause">
                                    <table class="table table-centered mb-0">
                                        <tbody>
                                            <tr *ngFor="let data of subCategoryCardData | callback: filterSocialSubCategory">
                                                <td>
                                                    <h5 class="font-size-14 mb-1">{{data.title}}</h5>
                                                    <p class="text-muted mb-0">In Audit & Inspection</p>
                                                </td>
                                                <td>
                                                    <apx-chart [series]="[data.percentage]" [chart]="radialChart.chart"
                                                        [plotOptions]="radialChart.plotOptions"
                                                        [labels]="radialChart.labels">
                                                    </apx-chart>
                                                </td>
                                                <td>
                                                    <p class="text-muted mb-1">Count</p>
                                                    <h5 class="mb-0">{{data.count}}</h5>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </ng-template>
                        </li>
                        <li [ngbNavItem]="3">
                            <a ngbNavLink>Health & Safety</a>
                            <ng-template ngbNavContent>
                                <div class="table-responsive mt-4 route-cause">
                                    <table class="table table-centered mb-0">
                                        <tbody>
                                            <tr *ngFor="let data of subCategoryCardData | callback: filterHealthSubCategory">
                                                <td>
                                                    <h5 class="font-size-14 mb-1">{{data.title}}</h5>
                                                    <p class="text-muted mb-0">In Audit & Inspection</p>
                                                </td>
                                                <td>
                                                    <apx-chart [series]="[data.percentage]" [chart]="radialChart.chart"
                                                        [plotOptions]="radialChart.plotOptions"
                                                        [labels]="radialChart.labels">
                                                    </apx-chart>
                                                </td>
                                                <td>
                                                    <p class="text-muted mb-1">Count</p>
                                                    <h5 class="mb-0">{{data.count}}</h5>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </ng-template>
                        </li>
                        <li [ngbNavItem]="4">
                            <a ngbNavLink>Environmental</a>
                            <ng-template ngbNavContent>
                                <div class="table-responsive mt-4 route-cause">
                                    <table class="table table-centered mb-0">
                                        <tbody>
                                            <tr *ngFor="let data of subCategoryCardData | callback: filterEnvSubCategory">
                                                <td>
                                                    <h5 class="font-size-14 mb-1">{{data.title}}</h5>
                                                    <p class="text-muted mb-0">In Audit & Inspection</p>
                                                </td>
                                                <td>
                                                    <apx-chart [series]="[data.percentage]" [chart]="radialChart.chart"
                                                        [plotOptions]="radialChart.plotOptions"
                                                        [labels]="radialChart.labels">
                                                    </apx-chart>
                                                </td>
                                                <td>
                                                    <p class="text-muted mb-1">Count</p>
                                                    <h5 class="mb-0">{{data.count}}</h5>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </ng-template>
                        </li>
                        <li [ngbNavItem]="5">
                            <a ngbNavLink>Security</a>
                            <ng-template ngbNavContent>
                                <div class="table-responsive mt-4 route-cause">
                                    <table class="table table-centered mb-0">
                                        <tbody>
                                            <tr *ngFor="let data of subCategoryCardData | callback: filterSecSubCategory">
                                                <td>
                                                    <h5 class="font-size-14 mb-1">{{data.title}}</h5>
                                                    <p class="text-muted mb-0">In Audit & Inspection</p>
                                                </td>
                                                <td>
                                                    <apx-chart [series]="[data.percentage]" [chart]="radialChart.chart"
                                                        [plotOptions]="radialChart.plotOptions"
                                                        [labels]="radialChart.labels">
                                                    </apx-chart>
                                                </td>
                                                <td>
                                                    <p class="text-muted mb-1">Count</p>
                                                    <h5 class="mb-0">{{data.count}}</h5>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </ng-template>
                        </li>
                        <li [ngbNavItem]="6">
                            <a ngbNavLink>Management System</a>
                            <ng-template ngbNavContent>
                                <div class="table-responsive mt-4 route-cause">
                                    <table class="table table-centered mb-0">
                                        <tbody>
                                            <tr *ngFor="let data of subCategoryCardData | callback: filterMngSubCategory">
                                                <td>
                                                    <h5 class="font-size-14 mb-1">{{data.title}}</h5>
                                                    <p class="text-muted mb-0">In Audit & Inspection</p>
                                                </td>
                                                <td>
                                                    <apx-chart [series]="[data.percentage]" [chart]="radialChart.chart"
                                                        [plotOptions]="radialChart.plotOptions"
                                                        [labels]="radialChart.labels">
                                                    </apx-chart>
                                                </td>
                                                <td>
                                                    <p class="text-muted mb-1">Count</p>
                                                    <h5 class="mb-0">{{data.count}}</h5>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </ng-template>
                        </li>
                    </ul>
                    <div [ngbNavOutlet]="subCategoryNav" class="mt-4"></div>
                </div>
            </div>
        </div>

        <div class="col-xl-7">
            <div class="card custom-height ">
                <div class="card-body custom-height">
                    <h4 class="card-title mb-4">External Audit Status</h4>
                    <div>
                        <apx-chart [series]="externalMonthlyChart.series" [chart]="externalMonthlyChart.chart"
                            [dataLabels]="externalMonthlyChart.dataLabels" [plotOptions]="externalMonthlyChart.plotOptions" [yaxis]="externalMonthlyChart.yaxis"
                            [legend]="externalMonthlyChart.legend" [fill]="externalMonthlyChart.fill" [stroke]="externalMonthlyChart.stroke"
                            [tooltip]="externalMonthlyChart.tooltip" [xaxis]="externalMonthlyChart.xaxis"></apx-chart>
                    </div>

                </div>
            </div>
        </div>

        

        
    </div>
    <div class="row">
        
        

    </div>


</div>