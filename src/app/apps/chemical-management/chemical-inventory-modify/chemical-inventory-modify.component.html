<div class="container-fluid">
    <div class="row" [formGroup]="Form">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-body">
                    <div class="container-fluid d-flex justify-content-between header">
                        <div class="col-lg-8 ps-0">
                            <a routerLink="." class="nobleui-logo d-block mt-3">Chemical<span>
                                    Management</span></a>

                            <p class="mt-1 mb-1">Inventory: {{Form.value.reference_number}}</p>
                        </div>
                        <div class="col-lg-4 pe-0">
                            <h6 class="fw-bold text-end mt-4 mb-2">Request Created Date</h6>
                            <h6 class="text-end mb-5 ">{{Form.value.reported_date| date:'MMM d, y'}}</h6>
                        </div>
                    </div>
                    <div class="container-fluid  d-flex justify-content-center w-100">
                        <div class="table-responsive w-100">
                            <div class="row">
                                <mat-tab-group mat-align-tabs="start" [(selectedIndex)]="selectedIndex">
                                    <mat-tab>
                                        <ng-template mat-tab-label>
                                            <mat-icon class="example-tab-icon">article</mat-icon>
                                            Chemical Details
                                        </ng-template>
                                        <div class="row ">
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Commercial Name</mat-label>
                                                    <input type="text" matInput formControlName="commercial_name">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Substance Name</mat-label>
                                                    <input type="text" matInput formControlName="substance_name">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row ">
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Molecular Formula</mat-label>
                                                    <input type="text" matInput formControlName="formula">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field fxFlex appearance="outline" color="primary">
                                                    <mat-label>Chemical Form Type</mat-label>
                                                    <mat-select formControlName="chemical_form">
                                                        <mat-option *ngFor="let value of chemical_dropdown"
                                                            value="{{ value }}">
                                                            {{ value }}</mat-option>
                                                    </mat-select>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row ">
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Reach Registration Number</mat-label>
                                                    <input type="text" matInput formControlName="reach_regi_number">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Requested Quantity</mat-label>
                                                    <input type="number" matInput formControlName="requested_quantity">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <mat-form-field fxFlex appearance="outline">
                                                    <mat-label>Requested Unit</mat-label>
                                                    <input type="text" matInput formControlName="requested_unit">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field fxFlex appearance="outline">
                                                    <mat-label>Product Standard</mat-label>
                                                    <mat-select [formControl]="ProductStandard"
                                                        (selectionChange)="Standard($event)">
                                                        <mat-option *ngFor="let standard of standardList"
                                                            [value]="standard">
                                                            {{ standard }}
                                                        </mat-option>
                                                        <mat-option (click)="add_standard()" class="option-btn"> <i
                                                                class=" mdi mdi-plus-circle"></i> Add new standard
                                                        </mat-option>
                                                    </mat-select>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Category</mat-label>
                                                    <input type="text" matInput formControlName="category">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>ZDHC use category</mat-label>
                                                    <input type="text" matInput formControlName="zdhc_use_category">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Where and Why It is Used?</mat-label>
                                                    <input type="text" matInput formControlName="where_why">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Formulator Name</mat-label>
                                                    <input type="text" matInput formControlName="formulator_name">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <button type="button" class="btn btn-primary btn-icon-text float-end mt-4"
                                                (click)="nextStep()">
                                                <i class="feather icon-arrow-right-circle btn-icon-prepend"></i>
                                                Next
                                            </button>
                                        </div>
                                    </mat-tab>
                                    <mat-tab>
                                        <ng-template mat-tab-label>
                                            <mat-icon class="example-tab-icon">local_shipping</mat-icon>
                                            Supplier Details
                                        </ng-template>
                                        <div class="row ">
                                            <div class="col-md-6">
                                                <mat-form-field fxFlex appearance="outline" color="primary">
                                                    <mat-label>Type</mat-label>
                                                    <mat-select formControlName="supplier_type"
                                                        (selectionChange)="onDropdownTypeChange($event)">
                                                        <mat-option *ngFor="let type of suppliertypeList"
                                                            [value]="type.attributes.Value">
                                                            {{ type.attributes.Value }}
                                                        </mat-option>
                                                    </mat-select>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field fxFlex appearance="outline">
                                                    <mat-label>Name</mat-label>
                                                    <mat-select formControlName="supplier_name"
                                                        (selectionChange)="manufactureName($event)">
                                                        <mat-option *ngFor="let name of supplierList"
                                                            value="{{name.attributes.name}}">

                                                            <div class="title-container">
                                                                <span> {{name.attributes.name}}</span>
                                                                <span class="icon-container">
                                                                    <i class="feather icon-edit titleicon_edit"
                                                                        (click)="update_supplier_name(name.id)"></i>
                                                                    &nbsp;
                                                                    <i class="feather icon-trash-2 titleicon_delete"
                                                                        (click)="delete_supplier_name(name.id)"></i>
                                                                </span>
                                                            </div>

                                                        </mat-option>
                                                        <mat-option (click)="new_supplier_name()" class="option-btn"> <i
                                                                class=" mdi mdi-plus-circle"></i> Create a new supplier
                                                        </mat-option>
                                                    </mat-select>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row ">
                                            <div class="col-md-6">
                                                <!-- New field added -->
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Manufacturer Name.</mat-label>
                                                    <input type="text" matInput formControlName="manufacturer_name">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                                <!-- New field added -->
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Contact Number</mat-label>
                                                    <input type="number" matInput formControlName="contact_number">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row ">
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Email ID</mat-label>
                                                    <input type="email" matInput formControlName="email_id">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Location / Country</mat-label>
                                                    <input type="text" matInput formControlName="location">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row ">
                                            <div class="col-md-6">
                                                <mat-form-field fxFlex appearance="outline" color="primary">
                                                    <mat-label>ZDHC Level</mat-label>
                                                    <mat-select formControlName="zdhc_level">
                                                        <mat-option *ngFor="let level of zdhcLevel"
                                                            [value]="level.attributes.Value ">
                                                            {{ level.attributes.Value }}
                                                        </mat-option>
                                                    </mat-select>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>CAS Number</mat-label>
                                                    <input type="text" matInput formControlName="cas_no">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Colour Index</mat-label>
                                                    <input type="text" matInput formControlName="colour_index">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>

                                        </div>
                                        <div class="row ">
                                            <div class="col-md-12">
                                                <div class="form-check form-switch mb-2">
                                                    <input type="checkbox" class="form-check-input" id="formSwitch1"
                                                        formControlName="msds_sds" (change)="validate_msds()">
                                                    <label class="form-check-label" for="formSwitch1">Do you have an
                                                        MSDS/SDS?</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mt-3" *ngIf="Form.value.msds_sds==true">
                                            <div class="custom-dropzone" ngx-dropzone [accept]="'application/pdf'"
                                                (change)="onSelect($event)">
                                                <ngx-dropzone-label>Drop your MSDS/SDS document. Please ensure the
                                                    document
                                                    size is less than 5 MB</ngx-dropzone-label>
                                                <ngx-dropzone-preview ngProjectAs="ngx-dropzone-preview"
                                                    [removable]="true" *ngFor="let f of files" [file]="f"
                                                    (removed)="onRemove(f)">
                                                    <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
                                                </ngx-dropzone-preview>
                                            </div>

                                            <button type="button" class="btn btn-icon-text btn-outline-twitter"
                                                (click)="view_msds_document()" *ngIf="Form.value.document_id">
                                                <i class="feather icon-file-text btn-icon-prepend"></i>
                                                View MSDS/SDS Document
                                            </button>
                                            <button type="button" class="btn btn-icon-text btn-outline-twitter"
                                                (click)="download_msds_document()" *ngIf="Form.value.document_id">
                                                <i class="feather icon-download btn-icon-prepend"></i>
                                                Download MSDS/SDS Document
                                            </button>
                                        </div>
                                        <div class="row mt-3">
                                            <div class="col-md-6">
                                                <mat-form-field fxFlex appearance="outline" color="warning"
                                                    *ngIf="Form.value.msds_sds=='1'">
                                                    <mat-label>MSDS / SDS Issued Date</mat-label>
                                                    <input matInput [matDatepicker]="issueddate"
                                                        [formControl]="issuedDate" value="date"
                                                        (dateChange)="issuedDateVal($event)">
                                                    <mat-datepicker-toggle matSuffix
                                                        [for]="issueddate"></mat-datepicker-toggle>
                                                    <mat-datepicker #issueddate></mat-datepicker>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field fxFlex appearance="outline" color="warning"
                                                    *ngIf="Form.value.msds_sds=='1'">
                                                    <mat-label>MSDS / SDS Expiry Date</mat-label>
                                                    <input matInput [matDatepicker]="expirydate"
                                                        [formControl]="expiryDate" value="date"
                                                        (dateChange)="expiryDateVal($event)">
                                                    <mat-datepicker-toggle matSuffix
                                                        [for]="expirydate"></mat-datepicker-toggle>
                                                    <mat-datepicker #expirydate></mat-datepicker>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row mt-3">
                                            <div class="col-md-6">
                                                <div class="form-check form-switch mb-2">
                                                    <input type="checkbox" class="form-check-input" id="formSwitch2"
                                                        formControlName="zdhc_mrsl">
                                                    <label class="form-check-label" for="formSwitch2">Compliant with the
                                                        latest version of ZDHC MRSL?</label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-check form-switch mb-2">
                                                    <input type="checkbox" class="form-check-input" id="formSwitch3"
                                                        formControlName="apeo_npe">
                                                    <label class="form-check-label" for="formSwitch3">APEO/NPE free
                                                        compliance statement?</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mt-3" *ngIf="Form.value.apeo_npe==true">
                                            <div class="custom-dropzone" ngx-dropzone [accept]="'application/pdf'"
                                                (change)="onSelectStatement($event)">
                                                <ngx-dropzone-label>Drop your APEO/NPE free compliance statement. Please
                                                    ensure the
                                                    statement size is less than 5 MB</ngx-dropzone-label>
                                                <ngx-dropzone-preview ngProjectAs="ngx-dropzone-preview"
                                                    [removable]="true" *ngFor="let f of statements" [file]="f"
                                                    (removed)="onRemoveStatement(f)">
                                                    <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
                                                </ngx-dropzone-preview>
                                            </div>
                                            <button type="button" class="btn btn-icon-text btn-outline-twitter"
                                                (click)="view_apeo_statement()" *ngIf="Form.value.statement_id">
                                                <i class="feather icon-file-text btn-icon-prepend"></i>
                                                View APEO/NPE Free Compliance Statement
                                            </button>
                                        </div>
                                        <div class="row mt-3">
                                            <div class="col-md-12">
                                                <div class="form-check form-switch mb-2">
                                                    <input type="checkbox" class="form-check-input" id="formSwitch3"
                                                        formControlName="chemcheck">
                                                    <label class="form-check-label" for="formSwitch3">Do you want to upload ChemCheck report?</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mt-3" *ngIf="Form.value.chemcheck==true">
                                            <div class="custom-dropzone" ngx-dropzone [accept]="'application/pdf'"
                                                (change)="onSelectReport($event)">
                                                <ngx-dropzone-label>Drop your ChemCheck report. Please ensure the
                                                    document
                                                    size is less than 5 MB</ngx-dropzone-label>
                                                <ngx-dropzone-preview ngProjectAs="ngx-dropzone-preview"
                                                    [removable]="true" *ngFor="let f of chemcheckreportFile" [file]="f"
                                                    (removed)="onRemoveReport(f)">
                                                    <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
                                                </ngx-dropzone-preview>
                                            </div>
                                            <button type="button" class="btn btn-icon-text btn-outline-twitter"
                                                (click)="view_chemcheck_report()" *ngIf="docId">
                                                <i class="feather icon-file-text btn-icon-prepend"></i>
                                                View ChemCheck Report
                                            </button>
                                        </div>
                                        <div class="mb-3">
                                            <button type="button" class="btn btn-primary btn-icon-text float-end mt-4"
                                                (click)="nextStep()">
                                                <i class="feather icon-arrow-right-circle btn-icon-prepend"></i>
                                                Next
                                            </button>
                                            <button type="button"
                                                class="btn btn-primary btn-icon-text float-end mt-4 btn-previous"
                                                (click)="previousStep()">
                                                <i class="feather icon-arrow-left-circle btn-icon-prepend"></i>
                                                Previous
                                            </button>
                                        </div>
                                    </mat-tab>
                                    <mat-tab>
                                        <ng-template mat-tab-label>
                                            <mat-icon class="example-tab-icon">receipt</mat-icon>
                                            Purchase Details
                                        </ng-template>
                                        <div class="row ">
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline" color="warning">
                                                    <mat-label>Manufacturing Date</mat-label>
                                                    <input matInput [matDatepicker]="manufacturingdate"
                                                        [formControl]="manufacturingDate" value="date"
                                                        (dateChange)="manufacturingDateVal($event)">
                                                    <mat-datepicker-toggle matSuffix
                                                        [for]="manufacturingdate"></mat-datepicker-toggle>
                                                    <mat-datepicker #manufacturingdate></mat-datepicker>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline" color="warning">
                                                    <mat-label>Expiry Date</mat-label>
                                                    <input matInput [matDatepicker]="cheexpirydate"
                                                        [formControl]="cheExpiryDate" value="date"
                                                        (dateChange)="cheExpiryDateDateVal($event)">
                                                    <mat-datepicker-toggle matSuffix
                                                        [for]="cheexpirydate"></mat-datepicker-toggle>
                                                    <mat-datepicker #cheexpirydate></mat-datepicker>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline" color="warning">
                                                    <mat-label>Delivery Date</mat-label>
                                                    <input matInput [matDatepicker]="deliverydate"
                                                        [formControl]="deliveryDate" value="date"
                                                        (dateChange)="deliveryDateVal($event)">
                                                    <mat-datepicker-toggle matSuffix
                                                        [for]="deliverydate"></mat-datepicker-toggle>
                                                    <mat-datepicker #deliverydate></mat-datepicker>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row ">
                                            <div class="col-md-4">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Delivered Quantity</mat-label>
                                                    <input type="number" matInput formControlName="delivered_quantity">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline">
                                                    <mat-label>Delivered Unit</mat-label>
                                                    <mat-select formControlName="delivered_unit">
                                                        <mat-option *ngFor="let name of deliveredUnit"
                                                            value="{{name.attributes.Value}}">
                                                            {{name.attributes.Value}}</mat-option>
                                                    </mat-select>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Purchased Amount</mat-label>
                                                    <input type="text" matInput formControlName="purchased_amount_val"
                                                        (change)="cost($event)" OnlyNumber="true">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-4">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Threshold Limit</mat-label>
                                                    <input type="number" matInput formControlName="threshold_limit">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline" color="warning">
                                                    <mat-label>Invoice Date</mat-label>
                                                    <input matInput [matDatepicker]="invoicedate"
                                                        [formControl]="invoiceDate" value="date"
                                                        (dateChange)="invoiceDateVal($event)">
                                                    <mat-datepicker-toggle matSuffix
                                                        [for]="invoicedate"></mat-datepicker-toggle>
                                                    <mat-datepicker #invoicedate></mat-datepicker>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Invoice Reference</mat-label>
                                                    <input type="text" matInput formControlName="invoice_reference">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <button type="button" class="btn btn-primary btn-icon-text float-end mt-4"
                                                (click)="nextStep()">
                                                <i class="feather icon-arrow-right-circle btn-icon-prepend"></i>
                                                Next
                                            </button>
                                            <button type="button"
                                                class="btn btn-primary btn-icon-text float-end mt-4 btn-previous"
                                                (click)="previousStep()">
                                                <i class="feather icon-arrow-left-circle btn-icon-prepend"></i>
                                                Previous
                                            </button>
                                        </div>
                                    </mat-tab>
                                    <mat-tab>
                                        <ng-template mat-tab-label>
                                            <mat-icon class="example-tab-icon">domain</mat-icon>
                                            Storage & Usage
                                        </ng-template>
                                        <div class="row">
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline" color="primary">
                                                    <mat-label>Use of PPE</mat-label>
                                                    <mat-select [formControl]="use_of_ppe" multiple
                                                        (selectionChange)="PPE($event)">
                                                        <mat-select-trigger>
                                                            {{use_of_ppe.value ? use_of_ppe.value[0] : ''}}
                                                            <span *ngIf="use_of_ppe.value?.length > 1"
                                                                class="example-additional-selection">
                                                                (+{{use_of_ppe.value.length - 1}}
                                                                {{use_of_ppe.value?.length === 2 ? 'other' : 'others'}})
                                                            </span>
                                                        </mat-select-trigger>
                                                        <mat-option *ngFor="let type of toppingList"
                                                            [value]="type.attributes.ppe_name">{{type.attributes.ppe_name}}</mat-option>

                                                        <mat-option (click)="add_ppe()" class="option-btn"> <i
                                                                class=" mdi mdi-plus-circle"></i> Add PPE
                                                        </mat-option>
                                                    </mat-select>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline" color="primary">
                                                    <mat-label>Hazard Type</mat-label>
                                                    <mat-select [formControl]="hazardType" multiple
                                                        (selectionChange)="HazardType($event)">
                                                        <mat-select-trigger>
                                                            {{hazardType.value ? hazardType.value[0] : ''}}
                                                            <span *ngIf="hazardType.value?.length > 1"
                                                                class="example-additional-selection">
                                                                (+{{hazardType.value.length - 1}}
                                                                {{hazardType.value?.length === 2 ?
                                                                'other' :
                                                                'others'}})
                                                            </span>
                                                        </mat-select-trigger>
                                                        <mat-option *ngFor="let type of TypeList"
                                                            [value]="type.attributes.Value"
                                                            [disabled]="hazardType.value?.includes('Not Applicable') && type.attributes.Value !== 'Not Applicable'">
                                                            {{type.attributes.Value}}
                                                        </mat-option>
                                                    </mat-select>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline" color="primary">
                                                    <mat-label>GHS Classification</mat-label>
                                                    <mat-select [formControl]="ghsClassification" multiple
                                                        (selectionChange)="GhsClassification($event)"
                                                        [disabled]="hazardType.value?.includes('Not Applicable')">
                                                        <mat-select-trigger>
                                                            {{ghsClassification.value ? ghsClassification.value[0] :
                                                            ''}}
                                                            <span *ngIf="ghsClassification.value?.length > 1"
                                                                class="example-additional-selection">
                                                                (+{{ghsClassification.value.length - 1}}
                                                                {{ghsClassification.value?.length === 2 ? 'other' :
                                                                'others'}})
                                                            </span>
                                                        </mat-select-trigger>
                                                        <mat-option *ngFor="let type of Issues"
                                                            [value]="type.attributes.Value">
                                                            <img style="vertical-align:middle; margin-right: 4px;"
                                                                src={{imglnk+type.attributes.icon+format}}
                                                                height="30" />
                                                            <span>{{type.attributes.Value}}</span>
                                                        </mat-option>
                                                    </mat-select>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">

                                            <div class="col-md-12">
                                                <mat-form-field fxFlex appearance="outline">
                                                    <mat-label>Hazard Statement Codes *</mat-label>
                                                    <mat-chip-list class="custom-chip-list" #statementCodeList
                                                        aria-label="Hazard Statement Codes">
                                                        <mat-chip *ngFor="let code of hazardStatementCode"
                                                            (removed)="removeCode(code)">
                                                            {{code}}
                                                            <button matChipRemove>
                                                                <mat-icon>cancel</mat-icon>
                                                            </button>
                                                        </mat-chip>
                                                        <input #statementCodeInput [formControl]="statementCodeCtrl"
                                                            [matAutocomplete]="codeAuto"
                                                            [matChipInputFor]="statementCodeList"
                                                            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                                            (matChipInputTokenEnd)="addStatementCode($event)"
                                                            [disabled]="hazardType.value?.includes('Not Applicable')">
                                                        <mat-error
                                                            *ngIf="this.hazardStatementCode.length ===0 && statementCodeCtrl.touched"
                                                            class="warning-font-size">
                                                            Field is required
                                                        </mat-error>
                                                    </mat-chip-list>
                                                    <mat-autocomplete #codeAuto="matAutocomplete"
                                                        (optionSelected)="selectedStatementCode($event)">
                                                        <mat-option *ngFor="let code of filteredstatementcode | async"
                                                            [value]="code">
                                                            {{code}}
                                                        </mat-option>
                                                    </mat-autocomplete>
                                                </mat-form-field>
                                            </div>

                                        </div>
                                        <div class="row">
                                            <!-- <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline" color="primary">
                                                    <mat-label>Hazard Statement</mat-label>
                                                    <mat-select [formControl]="hazard_statement" multiple
                                                          >
                                                        <mat-select-trigger>
                                                            {{hazard_statement.value ? hazard_statement.value[0] : ''}}
                                                            <span *ngIf="hazard_statement.value?.length > 1"
                                                                class="example-additional-selection">
                                                                (+{{hazard_statement.value.length - 1}}
                                                                {{hazard_statement.value?.length === 2 ? 'other' : 'others'}})
                                                            </span>
                                                        </mat-select-trigger>
                                                        <mat-option *ngFor="let type of statementList"   (click)="statementEvent(type)"
                                                            [value]="type.attributes.statement_name">{{type.attributes.statement_name}}</mat-option>
                                                    </mat-select>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div> -->
                                            <div class="col-md-12">
                                                <mat-form-field class="storage-condition-field" fxFlex
                                                    appearance="outline" color="primary">
                                                    <mat-label>Storage Condition Requirement</mat-label>

                                                    <input type="text" matInput placeholder="Please search here"
                                                        [matAutocomplete]="autoStorage" [formControl]="StorageConditons"
                                                        (focus)="onInputFocus()" (input)="onInputChanged($event)" />
                                                    <div>
                                                        <mat-chip-list class="mat-chip-list-wrapper">
                                                            <mat-chip
                                                                *ngFor="let condition of selectedStorageConditions"
                                                                class="mat-chip">
                                                                <span>{{ condition }}</span>
                                                                <mat-icon class="close-icon"
                                                                    (click)="removeSelectedCondition(condition)">close</mat-icon>
                                                            </mat-chip>
                                                        </mat-chip-list>
                                                    </div>

                                                    <mat-autocomplete #autoStorage="matAutocomplete">
                                                        <mat-option
                                                            *ngFor="let data of filteredStorageConditions | async"
                                                            (click)="toggleSelection(data.attributes.name)"
                                                            class="mat-input-element">
                                                            <div class="option-container">
                                                                <mat-checkbox
                                                                    [checked]="selectedStorageConditions.includes(data.attributes.name)"
                                                                    class="wrap-text">
                                                                    <span
                                                                        [innerHTML]="splitText(data.attributes.name)"></span>
                                                                </mat-checkbox>
                                                                <div class="icon-container"
                                                                    (click)="$event.stopPropagation()">
                                                                    <i class="feather icon-edit titleicon_edit"
                                                                        (click)="update_storage_condition(data.id)"></i>&nbsp;
                                                                    <i class="feather icon-trash-2 titleicon_delete"
                                                                        (click)="delete_storage_condition(data.id)"></i>
                                                                </div>
                                                            </div>
                                                        </mat-option>
                                                        <mat-option (click)="create_storage_condition()"
                                                            class="option-btn">
                                                            <i class="mdi mdi-plus-circle"></i> Create Storage Condition
                                                        </mat-option>
                                                    </mat-autocomplete>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>

                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline">
                                                    <mat-label>Storage Place</mat-label>
                                                    <mat-select formControlName="storage_place">
                                                        <mat-option *ngFor="let name of storagePlace"
                                                            value="{{name.attributes.name}}">
                                                            {{name.attributes.name}}</mat-option>
                                                        <mat-option (click)="new_storage_place()" class="option-btn"> <i
                                                                class=" mdi mdi-plus-circle"></i> Create a new storage
                                                        </mat-option>
                                                    </mat-select>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>LOT Number</mat-label>
                                                    <input type="text" matInput formControlName="lot_number">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <button type="button" class="btn btn-primary btn-icon-text float-end mt-4"
                                                (click)="nextStep()">
                                                <i class="feather icon-arrow-right-circle btn-icon-prepend"></i>
                                                Next
                                            </button>
                                            <button type="button"
                                                class="btn btn-primary btn-icon-text float-end mt-4 btn-previous"
                                                (click)="previousStep()">
                                                <i class="feather icon-arrow-left-circle btn-icon-prepend"></i>
                                                Previous
                                            </button>
                                        </div>
                                    </mat-tab>
                                    <mat-tab>
                                        <ng-template mat-tab-label>
                                            <mat-icon class="example-tab-icon">assignment</mat-icon>
                                            Certificates / Test
                                        </ng-template>
                                        <div class="row">
                                            <h6 class="mb-3">Certificates / Chemical Test</h6>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <button type="button" class="btn btn-primary btn-icon-text btn-xs"
                                                    (click)="createCertificate()">
                                                    <i class="feather icon-plus btn-icon-prepend"></i>
                                                    Create Certificate
                                                </button>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                        <th>Name</th>
                                                        <th>Test Date</th>
                                                        <th>Testing Lab</th>
                                                        <th>Issued Date</th>
                                                        <th>Expiry Date</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let data of certificateList">
                                                        <td>{{data.attributes.certificate_name}}</td>
                                                        <td>{{data.attributes.test_date | date:'dd-MMM-yyyy'}}</td>
                                                        <td>{{data.attributes.labs}}</td>
                                                        <td>{{data.attributes.certificate_issued_date |
                                                            date:'dd-MMM-yyyy'}}</td>
                                                        <td>{{data.attributes.certificate_expiry_date |
                                                            date:'dd-MMM-yyyy'}}</td>
                                                        <td>
                                                            <button type="button"
                                                                class="btn btn-danger btn-icon-text btn-xs action-btn float-end"
                                                                (click)="deleteCertificate(data)">

                                                                <i class="feather icon-trash-2"></i>
                                                            </button>

                                                            <button type="button"
                                                                class="btn btn-primary btn-icon-text btn-xs action-btn float-end"
                                                                (click)="editCertificate(data)">

                                                                <i class="feather icon-edit"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="mb-3">
                                            <button type="button" class="btn btn-success btn-icon-text float-end mt-4"
                                                (click)="submit()" [disabled]="!Form.valid">
                                                <i class="feather icon-send btn-icon-prepend"></i>
                                                Publish
                                            </button>
                                            <button type="button"
                                                class="btn btn-secondary btn-icon-text float-end mt-4 btn-previous"
                                                (click)="draft()">
                                                <i class="feather icon-save btn-icon-prepend"></i>
                                                Save as Draft
                                            </button>
                                            <button type="button"
                                                class="btn btn-primary btn-icon-text float-end mt-4 btn-previous"
                                                (click)="previousStep()">
                                                <i class="feather icon-arrow-left-circle btn-icon-prepend"></i>
                                                Previous
                                            </button>
                                        </div>
                                    </mat-tab>
                                </mat-tab-group>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="card">
                <div class="card-body">
                    <div class="mt-3">
                        <button class="btn btn-primary" mat-icon-button aria-label="Example icon-button with a menu">
                            {{Form.value.status}}
                        </button>
                        <button class="btn btn-success status-btn ms-2" mat-icon-button
                            aria-label="Example icon-button with a menu" (click)="navigate()">
                            <i class="feather icon-chevron-left"></i> Back to History

                        </button>
                    </div>
                    <div class="mt-3">
                        <label class="tx-11 fw-bolder mb-0 text-uppercase">Reported By:</label>
                        <p class="text-muted">{{Form.value.reporter_name}}, {{Form.value.reporter_designation}}</p>
                    </div>
                    <div class="mt-3">
                        <label class="tx-11 fw-bolder mb-0 text-uppercase">Reviewed By:</label>
                        <p class="text-muted">{{Form.value.reviewer_name}}, {{Form.value.reviewer_designation}}</p>
                    </div>
                    <div class="mt-3">
                        <label class="tx-11 fw-bolder mb-0 text-uppercase">Approved By:</label>
                        <p class="text-muted">{{Form.value.approver_name}}, {{Form.value.approver_designation}}</p>
                    </div>
                    <div class="mt-3">
                        <div class="col-md-12">
                            <mat-form-field appearance="outline">
                                <mat-label>Request Date</mat-label>
                                <input matInput readonly [matDatepicker]="dpSubDate" placeholder="Choose a date"
                                    [formControl]="requestDate">
                                <mat-datepicker-toggle matSuffix [for]="dpSubDate"></mat-datepicker-toggle>
                                <mat-datepicker #dpSubDate></mat-datepicker>
                                <mat-error>Required Field</mat-error>
                            </mat-form-field>

                        </div>
                        <div class="col-md-12">
                            <mat-form-field appearance="outline">
                                <mat-label>Requested Customer</mat-label>
                                <input type="text" matInput formControlName="requested_customer">
                                <mat-error>Required Field</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="col-md-12">
                            <mat-form-field appearance="outline">
                                <mat-label>Requested Merchandiser</mat-label>
                                <input type="text" matInput formControlName="requested_merchandiser">
                                <mat-error>Required Field</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="col-md-12">
                            <mat-form-field appearance="outline">
                                <mat-label>Division</mat-label>
                                <input type="text" matInput formControlName="division">
                                <mat-error>Required Field</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>