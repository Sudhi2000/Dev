<div class="container-fluid">
    <div class="row" [formGroup]="Form">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-body">
                    <div class="container-fluid d-flex justify-content-between header">
                        <div class="col-lg-8 ps-0">
                            <a routerLink="." class="nobleui-logo d-block mt-3">Clinical<span>
                                    Suite</span></a>

                            <p class="mt-1 mb-1">Patient ID: {{Form.value.patient_id}}</p>
                        </div>
                        <div class="col-lg-4 pe-0">
                            <h6 class="fw-bold text-end mt-4 mb-2">Check In Date & Time</h6>
                            <h6 class="text-end mb-5 ">{{Form.value.check_in| date:'MMM d, y'}} - {{Form.value.check_in
                                |
                                date:'h:mm a'}}</h6>
                        </div>
                    </div>
                    <div class="container-fluid  d-flex justify-content-center w-100">
                        <div class="table-responsive w-100">
                            <div class="row">
                                <mat-tab-group mat-align-tabs="start" [(selectedIndex)]="selectedIndex">
                                    <mat-tab>
                                        <ng-template mat-tab-label>
                                            <mat-icon class="example-tab-icon">article</mat-icon>
                                            Patient Details
                                        </ng-template>
                                        <div class="row ">
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Employee ID</mat-label>
                                                    <input type="text" matInput formControlName="employee_id">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Employee Name</mat-label>
                                                    <input type="text" matInput formControlName="employee_name">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>

                                        </div>
                                        <div class="row ">
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline" color="primary">
                                                    <mat-label>Gender</mat-label>
                                                    <input type="text" matInput formControlName="gender">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>

                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Age</mat-label>
                                                    <input type="number" matInput formControlName="age">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Designation</mat-label>
                                                    <input type="text" matInput formControlName="designation">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>

                                        </div>
                                        <div class="row ">
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline">
                                                    <mat-label>Employee Division</mat-label>
                                                    <input type="text" matInput formControlName="employee_division">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline">
                                                    <mat-label>Department</mat-label>
                                                    <input type="text" matInput formControlName="department">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>

                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline">
                                                    <mat-label>Sub Department</mat-label>
                                                    <input type="text" matInput formControlName="sub_department">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline" color="primary">
                                                    <mat-label>Work Status</mat-label>
                                                    <input type="text" matInput formControlName="work_status">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-8">
                                                <mat-form-field fxFlex appearance="outline" color="primary">
                                                    <mat-label>Symptom</mat-label>
                                                    <input type="text" matInput formControlName="symptoms">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>

                                        <div class="mb-3">
                                            <button type="button" class="btn btn-primary btn-icon-text float-end mt-4"
                                                (click)="nextStep()">
                                                <i class="feather icon-arrow-right-circle btn-icon-prepend"></i>
                                                Next
                                            </button>
                                        </div>
                                    </mat-tab>

                                    <mat-tab>
                                        <ng-template mat-tab-label>
                                            <mat-icon class="example-tab-icon">receipt</mat-icon>
                                            Doctor Consultation
                                        </ng-template>

                                        <div class="row ">
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Category</mat-label>
                                                    <mat-select formControlName="category"
                                                        (selectionChange)="onCategoryChange($event,'change')">
                                                        <mat-option *ngFor="let name of category" value="{{name.attributes.category
                                                            }}">
                                                            {{name.attributes.category
                                                            }}</mat-option>
                                                    </mat-select>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>

                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field fxFlex appearance="outline">
                                                    <mat-label>Disease</mat-label>
                                                    <!-- <mat-select formControlName="disease">
                                                        <mat-option *ngFor="let name of diseases"
                                                            value="{{ name.attributes.disease_name }}">
                                                            {{ name.attributes.disease_name }}</mat-option>

                                                        <mat-option (click)="new_disease()" class="option-btn">
                                                            <i class="mdi mdi-plus-circle"></i> Create New Disease
                                                        </mat-option>
                                                    </mat-select> -->
                                                    <input type="text" placeholder="Please search here" matInput
                                                        [formControl]="diseaseControl" [matAutocomplete]="autoDisease"
                                                        (blur)="onDiseaseInputBlur()">


                                                    <mat-autocomplete #autoDisease="matAutocomplete"
                                                        autoActiveFirstOption>
                                                        <mat-option *ngFor="let name of filteredDiseases | async"
                                                            [value]="name.attributes.disease_name">
                                                            {{ name.attributes.disease_name }}
                                                        </mat-option>

                                                        <mat-option (click)="new_disease()" class="option-btn">
                                                            <i class="mdi mdi-plus-circle"></i> Create New Disease
                                                        </mat-option>
                                                    </mat-autocomplete>
                                                    <mat-error>
                                                        Field is required.
                                                    </mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field fxFlex appearance="outline">
                                                    <mat-label>Health Issue Type</mat-label>
                                                    <input type="text" matInput formControlName="health_issue_type">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Severity Level</mat-label>
                                                    <mat-select formControlName="severity_level">
                                                        <mat-option *ngFor="let name of severityLevel"
                                                            value="{{name.attributes.Value}}">
                                                            {{name.attributes.Value}}</mat-option>
                                                    </mat-select>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>

                                            </div>

                                        </div>
                                        <div class="row mt-5 mb-4 text-center">
                                            <div class="d-grid gap-2">

                                                <button type="button" class="btn btn-secondary" id="ai-suggest"
                                                    (click)="checkDescription()">AI -
                                                    Generate Treatment</button>
                                                <!-- <span style="font-size: 0.75rem;">
                                                    
                                                </span> -->
                                                <span style="display: block; text-align: left;">
                                                    <strong> <i class="feather icon-alert-triangle"
                                                            style="color: #FFC107; margin-right: 2px;"></i>
                                                        AI Disclaimer :
                                                    </strong>
                                                    <span style="font-size: 0.75rem;">This content was generated with AI
                                                        assistance. While it aims to be
                                                        accurate and helpful, it may not fully reflect expert judgment
                                                        or
                                                        the latest regulations. Please review and validate before using
                                                        it for decision-making or official purposes.</span>
                                                </span>


                                                <p class="error hide" id="error-text">Please select Category, Disease,
                                                    Severity level
                                                </p>
                                                <button type="button" class="btn btn-success hide" id="ai-loader">
                                                    <span class="spinner-grow spinner-grow-sm" role="status"
                                                        aria-hidden="true"></span>
                                                    Please wait our AI is looking recommendations for treatment.
                                                </button>

                                            </div>

                                        </div>
                                        <div class="row mt-3">
                                            <quill-editor placeholder="Treatment *" [modules]="quillConfig"
                                                formControlName="treatment">
                                            </quill-editor>
                                            <p *ngIf="!Form.controls['treatment'].valid &&Form.controls['treatment'].touched"
                                                class="quill-editor-error"> Required Field *</p>
                                        </div>
                                        <div class="row mt-3">
                                            <h6 class="mb-3">Medical Prescription</h6>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <button type="button" class="btn btn-primary btn-icon-text btn-xs"
                                                    (click)="createPrescription()">
                                                    <i class="feather icon-plus btn-icon-prepend"></i>
                                                    Add Medicine
                                                </button>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="table-responsive pt-3">
                                                <table mat-table [dataSource]="dataSource" matSort>
                                                    <ng-container matColumnDef="medicine_name">
                                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Medicine
                                                            Name </th>
                                                        <td mat-cell *matCellDef="let element">
                                                            {{element.attributes.medicine_name}} </td>
                                                    </ng-container>
                                                    <ng-container matColumnDef="dosage">
                                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Dosage
                                                        </th>
                                                        <td mat-cell *matCellDef="let element">
                                                            {{element.attributes.dosage}} </td>
                                                    </ng-container>
                                                    <ng-container matColumnDef="days">
                                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Days</th>
                                                        <td mat-cell *matCellDef="let element">
                                                            {{element.attributes.days}} </td>
                                                    </ng-container>
                                                    <ng-container matColumnDef="outside_medicine">
                                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Outside
                                                        </th>
                                                        <td class="text-center" mat-cell *matCellDef="let element"
                                                            innerHTML="{{element.attributes.outside_medicine}}">
                                                        </td>
                                                    </ng-container>
                                                    <ng-container matColumnDef="status">
                                                        <th mat-header-cell *matHeaderCellDef mat-sort-header
                                                            sortActionDescription="Status"> Status
                                                        </th>
                                                        <td mat-cell *matCellDef="let element">
                                                            <!-- <button type="button"
                                                                class="btn btn-secondary status-btn btn-icon-text btn-xs">
                                                                {{element.attributes.status}}
                                                            </button> -->
                                                            <button type="button"
                                                                class="btn {{statusButton(element.attributes.status)}} status-btn btn-icon-text btn-xs">
                                                                {{element.attributes.status}}
                                                            </button>
                                                        </td>
                                                    </ng-container>
                                                    <ng-container matColumnDef="actions">
                                                        <th *matHeaderCellDef class="actions-cell" mat-header-cell
                                                            mat-sort-header>Actions</th>
                                                        <td *matCellDef="let row" class="actions-cell" mat-cell>
                                                            <button type="button "
                                                                class="btn btn-primary btn-icon btn-xs edit-btn"
                                                                (click)="view(row)" placement="top" ngbTooltip="View">
                                                                <i class="feather icon-eye"></i>
                                                            </button>
                                                            <button type="button "
                                                                *ngIf="row.attributes.status =='Open'"
                                                                class="btn btn-danger btn-icon btn-xs edit-btn"
                                                                (click)="deletePrescription(row)" placement="top"
                                                                ngbTooltip="Delete">
                                                                <i class="feather icon-trash-2"></i>
                                                            </button>
                                                            <button type="button"
                                                                *ngIf="row.attributes.outside_medicine == '' && row.attributes.status =='Open'"
                                                                class="btn btn-secondary btn-icon btn-xs edit-btn"
                                                                (click)="issuePrescription(row)" placement="top"
                                                                ngbTooltip="Action">
                                                                <i class="feather icon-zap"></i>
                                                            </button>

                                                        </td>
                                                    </ng-container>
                                                    <tr mat-header-row *matHeaderRowDef="visibleColumns"></tr>
                                                    <tr mat-row *matRowDef="let row; columns: visibleColumns;"></tr>
                                                </table>

                                            </div>
                                        </div>



                                        <div class="row mt-4 ">
                                            <div class="col-md-6">

                                                <div class="form-check form-switch mb-2">
                                                    <input type="checkbox" class="form-check-input" id="formSwitch1"
                                                        formControlName="follow_up_status">
                                                    <label class="form-check-label" for="formSwitch1">Required
                                                        Follow-up</label>
                                                </div>
                                            </div>


                                        </div>
                                        <div class="row mt-2 ">
                                            <div class="col-md-6">
                                                <mat-form-field fxFlex appearance="outline" color="warning">
                                                    <mat-label>Follow Up Date</mat-label>
                                                    <input matInput [matDatepicker]="followupdate"
                                                        [formControl]="followupDate" value="date"
                                                        (dateChange)="followupDateVal($event)">
                                                    <mat-datepicker-toggle matSuffix
                                                        [for]="followupdate"></mat-datepicker-toggle>
                                                    <mat-datepicker #followupdate></mat-datepicker>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row mt-2 ">
                                            <div class="col-md-6">
                                                <div class="form-check form-switch mb-2">
                                                    <input type="checkbox" class="form-check-input" id="formSwitch3"
                                                        formControlName="lift_usage_required"
                                                        (change)="enable_Lift_Usage($event)">
                                                    <label class="form-check-label" for="formSwitch3">Lift Usage
                                                        Required</label>
                                                </div>
                                            </div>


                                        </div>


                                        <div [hidden]="!Form.get('lift_usage_required')?.value">
                                            <div class="row mt-2">
                                                <div class="col-md-6">
                                                    <mat-form-field appearance="outline">
                                                        <mat-label>Since Complaint</mat-label>
                                                        <input type="text" matInput formControlName="since_complaint">
                                                        <mat-error>Required Field</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-6">
                                                    <mat-form-field appearance="outline">
                                                        <mat-label>Recommended Duration</mat-label>
                                                        <input type="text" matInput
                                                            formControlName="recommended_duration">
                                                        <mat-error>Required Field</mat-error>
                                                    </mat-form-field>
                                                </div>
                                            </div>

                                        </div>


                                        <div class="col-md-6 mt-2">
                                            <div class="form-check form-switch mb-2">
                                                <input type="checkbox" class="form-check-input" id="referPatientToggle"
                                                    formControlName="refer_patient" (change)="ReferPatient($event)">
                                                <label class="form-check-label" for="referPatientToggle">Refer
                                                    Patient</label>
                                            </div>
                                        </div>
                                        <div *ngIf="Form.get('refer_patient')?.value" class="mt-3">
                                            <div class="form-check">
                                                <input type="radio" class="form-check-input" id="referToHome"
                                                    formControlName="refer_option" name="refer_option" value="home"
                                                    (change)="onReferOptionChange('home')">
                                                <label class="form-check-label" for="referToHome">Refer to Home</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="radio" class="form-check-input" id="referToHospital"
                                                    formControlName="refer_option" name="refer_option" value="hospital"
                                                    (change)="onReferOptionChange('hospital')">
                                                <label class="form-check-label" for="referToHospital">Refer to Another
                                                    Hospital</label>
                                            </div>
                                        </div>
                                        <div class="mt-3" *ngIf="Form.value.refer_option === 'home'">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <mat-form-field appearance="outline">
                                                        <mat-label>Leave Days</mat-label>
                                                        <input type="number" matInput formControlName="leave_days"
                                                            step="0.01" (keydown)="blockInvalidKeys($event)">
                                                        <mat-error>Required Field</mat-error>
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                        </div>

                                        <div *ngIf="Form.value.refer_option === 'hospital'" class="mt-3">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <mat-form-field fxFlex appearance="outline">
                                                        <mat-label>Hospital Name</mat-label>
                                                        <input type="text" matInput [formControl]="SelectHospital"
                                                            [matAutocomplete]="autoHospitals" (focus)="onInputFocus()">
                                                        <mat-autocomplete #autoHospitals="matAutocomplete"
                                                            (optionSelected)="onOptionSelected($event)">
                                                            <mat-option *ngFor="let data of filteredHospitals | async"
                                                                [value]="data.attributes.name">
                                                                <div class="title-container">
                                                                    <span> {{data.attributes.name}}</span>
                                                                    <span class="icon-container"><i
                                                                            class="feather icon-edit titleicon_edit"
                                                                            (click)="update_hospital_name(data.id)"></i>
                                                                        &nbsp;
                                                                        <i class="feather icon-trash-2 titleicon_delete"
                                                                            (click)="delete_hospital_name(data.id)"></i>
                                                                    </span>
                                                                </div>
                                                            </mat-option>


                                                            <mat-option (click)="create_hospital_name()"
                                                                class="option-btn">
                                                                <i class="mdi mdi-plus-circle"></i> Add New
                                                            </mat-option>
                                                        </mat-autocomplete>
                                                        <mat-error>Required Field</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <!-- <div class="col-md-6">
                                                    <mat-form-field appearance="outline">
                                                        <mat-label>Hospital Name</mat-label>
                                                        <input type="text" matInput formControlName="hospital_name">
                                                        <mat-error>Required Field</mat-error>
                                                    </mat-form-field>
                                                </div> -->
                                                <div class="col-md-6">
                                                    <mat-form-field appearance="outline">
                                                        <mat-label>Hospital Location</mat-label>
                                                        <input type="text" matInput formControlName="hospital_location">
                                                        <mat-error>Required Field</mat-error>
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                            <div class="row mt-3">
                                                <quill-editor placeholder="Doctor Prescription" [modules]="quillConfig"
                                                    formControlName="doctor_prescription">
                                                </quill-editor>
                                            </div>
                                            <div class="row mt-3">
                                                <h6 class="mb-3"> Medicine Details </h6>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <button type="button" class="btn btn-primary btn-icon-text btn-xs"
                                                        (click)="createMedicalDetails()">
                                                        <i class="feather icon-plus btn-icon-prepend"></i>
                                                        Add Medicine
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="table-responsive pt-3">
                                                    <table mat-table [dataSource]="dataSourceMedical" matSort>
                                                        <ng-container matColumnDef="medicine_name">
                                                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                                                Medicine
                                                                Name </th>
                                                            <td mat-cell *matCellDef="let element">
                                                                {{element.attributes.medicine_name}} </td>
                                                        </ng-container>
                                                        <ng-container matColumnDef="dosage">
                                                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                                                Dosage
                                                            </th>
                                                            <td mat-cell *matCellDef="let element">
                                                                {{element.attributes.dosage}} </td>
                                                        </ng-container>
                                                        <ng-container matColumnDef="days">
                                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Days
                                                            </th>
                                                            <td mat-cell *matCellDef="let element">
                                                                {{element.attributes.days}} </td>
                                                        </ng-container>
                                                        <ng-container matColumnDef="outside_medicine">
                                                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                                                Outside
                                                            </th>
                                                            <td class="text-center" mat-cell *matCellDef="let element"
                                                                innerHTML="{{element.attributes.outside_medicine}}">
                                                            </td>
                                                        </ng-container>
                                                        <ng-container matColumnDef="status">
                                                            <th mat-header-cell *matHeaderCellDef mat-sort-header
                                                                sortActionDescription="Status"> Status
                                                            </th>
                                                            <td mat-cell *matCellDef="let element">
                                                                <button type="button"
                                                                    class="btn btn-secondary status-btn btn-icon-text btn-xs">
                                                                    {{element.attributes.status}}
                                                                </button>
                                                            </td>
                                                        </ng-container>
                                                        <ng-container matColumnDef="actions">
                                                            <th *matHeaderCellDef class="actions-cell" mat-header-cell
                                                                mat-sort-header>Actions</th>
                                                            <td *matCellDef="let row" class="actions-cell" mat-cell>
                                                                <button type="button "
                                                                    class="btn btn-primary btn-icon btn-xs edit-btn"
                                                                    (click)="view(row)" placement="top"
                                                                    ngbTooltip="View">
                                                                    <i class="feather icon-eye"></i>
                                                                </button>
                                                                <button type="button "
                                                                    class="btn btn-danger btn-icon btn-xs edit-btn"
                                                                    (click)="deletePrescription(row)" placement="top"
                                                                    ngbTooltip="Delete">
                                                                    <i class="feather icon-trash-2"></i>
                                                                </button>
                                                            </td>
                                                        </ng-container>
                                                        <tr mat-header-row *matHeaderRowDef="visibleColumns"></tr>
                                                        <tr mat-row *matRowDef="let row; columns: visibleColumns;"></tr>
                                                    </table>

                                                </div>
                                            </div>
                                            <div class="row mt-3 ">
                                                <div class="col-md-6">
                                                    <mat-form-field fxFlex appearance="outline" color="warning">
                                                        <mat-label>Admitted Date</mat-label>
                                                        <input matInput [matDatepicker]="admitted_date"
                                                            [formControl]="admittedDate" value="date"
                                                            (dateChange)="admittedDateVal($event)">
                                                        <mat-datepicker-toggle matSuffix
                                                            [for]="admitted_date"></mat-datepicker-toggle>
                                                        <mat-datepicker #admitted_date></mat-datepicker>
                                                        <mat-error>Required Field</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-6">
                                                    <mat-form-field fxFlex appearance="outline" color="warning">
                                                        <mat-label>Discharged Date</mat-label>
                                                        <input matInput [matDatepicker]="discharged_date"
                                                            [formControl]="dischargedDate" value="date"
                                                            (dateChange)="dischargedDateVal($event)">
                                                        <mat-datepicker-toggle matSuffix
                                                            [for]="discharged_date"></mat-datepicker-toggle>
                                                        <mat-datepicker #discharged_date></mat-datepicker>
                                                        <mat-error>Required Field</mat-error>
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                            <div class="row mt-2 ">
                                                <div class="col-md-6">

                                                    <div class="form-check form-switch mb-2">
                                                        <input type="checkbox" class="form-check-input" id="formSwitch4"
                                                            formControlName="sent_via_ambulance">
                                                        <label class="form-check-label" for="formSwitch4">Sent via
                                                            Ambulance</label>
                                                    </div>
                                                </div>


                                            </div>

                                        </div>



                                        <!-- <div>
                                            <div class="col-md-6 mt-2">

                                                <div class="form-check form-switch mb-2">
                                                    <input type="checkbox" class="form-check-input" id="formSwitch2"
                                                        formControlName="refer_another_hospital_status"
                                                        (change)="refer_another_hospital_status($event)">
                                                    <label class="form-check-label" for="formSwitch2">Refer To Another
                                                        Hosipital</label>
                                                </div>
                                            </div>
                                        </div>

                                        <div [hidden]="!Form.get('refer_another_hospital_status')?.value" class="mt-3">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <mat-form-field appearance="outline">
                                                        <mat-label>Hospital Name</mat-label>
                                                        <input type="text" matInput formControlName="hospital_name">
                                                        <mat-error>Required Field</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-6">
                                                    <mat-form-field appearance="outline">
                                                        <mat-label>Hospital Location</mat-label>
                                                        <input type="text" matInput formControlName="hospital_location">
                                                        <mat-error>Required Field</mat-error>
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                            <div class="row mt-3">
                                                <quill-editor placeholder="Doctor Prescription" [modules]="quillConfig"
                                                    formControlName="doctor_prescription">
                                                </quill-editor>
                                            </div>
                                            <div class="row mt-3">
                                                <h6 class="mb-3"> Medicine Details </h6>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <button type="button" class="btn btn-primary btn-icon-text btn-xs"
                                                        (click)="createMedicalDetails()">
                                                        <i class="feather icon-plus btn-icon-prepend"></i>
                                                        Add Medicine
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="table-responsive pt-3">
                                                    <table mat-table [dataSource]="dataSourceMedical" matSort>
                                                        <ng-container matColumnDef="medicine_name">
                                                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                                                Medicine
                                                                Name </th>
                                                            <td mat-cell *matCellDef="let element">
                                                                {{element.attributes.medicine_name}} </td>
                                                        </ng-container>
                                                        <ng-container matColumnDef="dosage">
                                                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                                                Dosage
                                                            </th>
                                                            <td mat-cell *matCellDef="let element">
                                                                {{element.attributes.dosage}} </td>
                                                        </ng-container>
                                                        <ng-container matColumnDef="days">
                                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Days
                                                            </th>
                                                            <td mat-cell *matCellDef="let element">
                                                                {{element.attributes.days}} </td>
                                                        </ng-container>
                                                        <ng-container matColumnDef="outside_medicine">
                                                            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                                                Outside
                                                            </th>
                                                            <td class="text-center" mat-cell *matCellDef="let element"
                                                                innerHTML="{{element.attributes.outside_medicine}}">
                                                            </td>
                                                        </ng-container>
                                                        <ng-container matColumnDef="status">
                                                            <th mat-header-cell *matHeaderCellDef mat-sort-header
                                                                sortActionDescription="Status"> Status
                                                            </th>
                                                            <td mat-cell *matCellDef="let element">
                                                                <button type="button"
                                                                    class="btn btn-secondary status-btn btn-icon-text btn-xs">
                                                                    {{element.attributes.status}}
                                                                </button>
                                                            </td>
                                                        </ng-container>
                                                        <ng-container matColumnDef="actions">
                                                            <th *matHeaderCellDef class="actions-cell" mat-header-cell
                                                                mat-sort-header>Actions</th>
                                                            <td *matCellDef="let row" class="actions-cell" mat-cell>
                                                                <button type="button "
                                                                    class="btn btn-primary btn-icon btn-xs edit-btn"
                                                                    (click)="view(row)" placement="top"
                                                                    ngbTooltip="View">
                                                                    <i class="feather icon-eye"></i>
                                                                </button>
                                                                <button type="button "
                                                                    class="btn btn-danger btn-icon btn-xs edit-btn"
                                                                    (click)="deletePrescription(row)" placement="top"
                                                                    ngbTooltip="Delete">
                                                                    <i class="feather icon-trash-2"></i>
                                                                </button>
                                                            </td>
                                                        </ng-container>
                                                        <tr mat-header-row *matHeaderRowDef="visibleColumns"></tr>
                                                        <tr mat-row *matRowDef="let row; columns: visibleColumns;"></tr>
                                                    </table>

                                                </div>
                                            </div>
                                            <div class="row mt-3 ">
                                                <div class="col-md-6">
                                                    <mat-form-field fxFlex appearance="outline" color="warning">
                                                        <mat-label>Admitted Date</mat-label>
                                                        <input matInput [matDatepicker]="admitted_date"
                                                            [formControl]="admittedDate" value="date"
                                                            (dateChange)="admittedDateVal($event)">
                                                        <mat-datepicker-toggle matSuffix
                                                            [for]="admitted_date"></mat-datepicker-toggle>
                                                        <mat-datepicker #admitted_date></mat-datepicker>
                                                        <mat-error>Required Field</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-6">
                                                    <mat-form-field fxFlex appearance="outline" color="warning">
                                                        <mat-label>Discharged Date</mat-label>
                                                        <input matInput [matDatepicker]="discharged_date"
                                                            [formControl]="dischargedDate" value="date"
                                                            (dateChange)="dischargedDateVal($event)">
                                                        <mat-datepicker-toggle matSuffix
                                                            [for]="discharged_date"></mat-datepicker-toggle>
                                                        <mat-datepicker #discharged_date></mat-datepicker>
                                                        <mat-error>Required Field</mat-error>
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                            <div class="row mt-2 ">
                                                <div class="col-md-6">

                                                    <div class="form-check form-switch mb-2">
                                                        <input type="checkbox" class="form-check-input" id="formSwitch4"
                                                            formControlName="sent_via_ambulance">
                                                        <label class="form-check-label" for="formSwitch4">Sent via
                                                            Ambulance</label>
                                                    </div>
                                                </div>


                                            </div>
                                        </div> -->
                                        <div class="mb-3">
                                            <button type="button" class="btn btn-success btn-icon-text float-end mt-4"
                                                (click)="submit()" [disabled]="!Form.valid">
                                                <i class="feather icon-send btn-icon-prepend"></i>
                                                Complete
                                            </button>
                                            <button type="button"
                                                class="btn btn-secondary btn-icon-text float-end mt-4 btn-previous"
                                                (click)="draft()">
                                                <i class="feather icon-save btn-icon-prepend"></i>
                                                Save as Draft
                                            </button>
                                            <button type="button"
                                                class="btn btn-primary btn-icon-text float-end mt-4 btn-previous"
                                                (click)="previousStep()">
                                                <i class="feather icon-arrow-left-circle btn-icon-prepend"></i>
                                                Previous
                                            </button>
                                        </div>
                                    </mat-tab>
                                    <mat-tab *ngIf="patientHistory.length > 0">
                                        <ng-template mat-tab-label>
                                            <mat-icon class="example-tab-icon">layers</mat-icon>
                                            Patient History
                                        </ng-template>
                                        <div class="row">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                        <th>Disease</th>
                                                        <th>Severity Level</th>
                                                        <!-- <th>Admitted Date</th>
                                                        <th>Discharged Date</th> -->
                                                        <th>Consulting Doctor</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let data of patientHistory">
                                                        <!-- <td>{{data.attributes.document_number}}</td>
                                                        <td>{{data.attributes.issued_date| date:'dd-MMM-yyyy'}}</td>
                                                        <td>{{data.attributes.expiry_date| date:'dd-MMM-yyyy'}}</td>
                                                        <td>{{data.attributes.notify_date| date:'dd-MMM-yyyy'}}</td>
                                                        <td>
                                                            <button type="button"
                                                                class="btn btn-secondary btn-icon btn-xs btn-previous"
                                                                (click)="view(data)" placement="top" ngbTooltip="View">
                                                                <i class="feather icon-eye"></i>
                                                            </button>
                                                        </td> -->
                                                        <td>{{data.attributes.disease}}</td>
                                                        <td>{{data.attributes.severity_level}}</td>
                                                        <!-- <td>{{data.attributes.admitted_date| date:'dd-MMM-yyyy'}}</td>
                                                        <td>{{data.attributes.discharged_date| date:'dd-MMM-yyyy'}}</td> -->
                                                        <td>{{data.attributes.consulting_doctor.data.attributes.first_name}}
                                                            {{data.attributes.consulting_doctor.data.attributes.last_name}}
                                                        </td>

                                                        <td>
                                                            <button type="button"
                                                                class="btn btn-secondary btn-icon btn-xs btn-previous"
                                                                (click)="viewPatientHistory(data)" placement="top"
                                                                ngbTooltip="View">
                                                                <i class="feather icon-eye"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="mb-3">

                                            <button type="button"
                                                class="btn btn-primary btn-icon-text float-end mt-4 btn-previous"
                                                (click)="previousStep()">
                                                <i class="feather icon-arrow-left-circle btn-icon-prepend"></i>
                                                Previous
                                            </button>
                                        </div>
                                    </mat-tab>
                                </mat-tab-group>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="card">
                <div class="card-body">
                    <div class="mt-3">
                        <button class="btn btn-primary" mat-icon-button aria-label="Example icon-button with a menu">
                            {{Form.value.status}}
                        </button>
                        <button (click)="navigate()" class="btn btn-success ms-2" mat-icon-button
                            aria-label="Example icon-button with a menu">
                            <i class="feather icon-chevron-left"></i> Back to
                            History

                        </button>
                    </div>

                    <div class="mt-3">
                        <label class="tx-11 fw-bolder mb-0 text-uppercase">Created By:</label>


                        <p class="text-muted">{{Form.value.created_by}}, {{Form.value.creator_designation}}</p>
                    </div>

                    <div class="mt-3">
                        <label class="tx-11 fw-bolder mb-0 text-uppercase">Consulting Doctor:</label>
                        <p class="text-muted">{{Form.value.doctor_name}}, {{Form.value.doctor_designation}}</p>
                    </div>
                    <div class="mt-3">
                        <label class="tx-11 fw-bolder mb-0 text-uppercase">Clinic Division:</label>
                        <p class="text-muted">{{Form.value.clinic_division}}</p>
                    </div>

                    <div class="mt-3">
                        <label class="tx-11 fw-bolder mb-3 text-uppercase">Preliminary Checkup:</label>

                        <mat-form-field appearance="outline">
                            <mat-label>Body Temperature (F)</mat-label>
                            <input type="number" matInput formControlName="body_temperature">
                            <mat-error>Required Field</mat-error>
                        </mat-form-field>
                        <mat-form-field appearance="outline">
                            <mat-label> Weight (KG)</mat-label>
                            <input type="number" matInput formControlName="weight">
                            <mat-error>Required Field</mat-error>
                        </mat-form-field>
                        <mat-form-field appearance="outline">
                            <mat-label> Height (M)</mat-label>
                            <input type="number" matInput formControlName="height">
                            <mat-error>Required Field</mat-error>
                        </mat-form-field>
                        <mat-form-field appearance="outline">
                            <mat-label>Blood Pressure (mm Hg)</mat-label>
                            <input type="text" matInput formControlName="blood_pressure">
                            <mat-error>Required Field</mat-error>
                        </mat-form-field>
                        <mat-form-field appearance="outline">
                            <mat-label>Random Blood Sugar</mat-label>
                            <input type="text" matInput formControlName="random_blood_sugar">
                            <mat-error>Required Field</mat-error>
                        </mat-form-field>

                        <div id="bmi-chart">
                            <p class="mt-1 mb-1">Body Mass Index (BMI)</p>
                            <button type="button" class="btn {{ btnStyle }}">
                                {{ bmiText }}
                                <span class="badge text-dark">{{ bmiValue }}</span>
                            </button>
                            <div id="gaugeArea"></div>
                        </div>
                    </div>



                </div>
            </div>
        </div>
    </div>
</div>