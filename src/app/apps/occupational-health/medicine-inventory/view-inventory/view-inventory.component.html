<div class="container-fluid">
    <div class="row" [formGroup]="Form">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-body">
                    <div class="container-fluid d-flex justify-content-between header">
                        <div class="col-lg-8 ps-0">
                            <a routerLink="." class="nobleui-logo d-block mt-3">Medicine<span>
                                    Inventory</span></a>

                            <p class="mt-1 mb-1">Inventory: {{Form.value.reference_number}}</p>
                        </div>
                        <div class="col-lg-4 pe-0">
                            <h6 class="fw-bold text-end mt-4 mb-2">Requested Date</h6>
                            <h6 class="text-end mb-5 ">{{Form.value.reported_date| date:'MMM d, y'}}</h6>
                        </div>
                    </div>
                    <div class="container-fluid  d-flex justify-content-center w-100">
                        <div class="table-responsive w-100">
                            <div class="row">
                                <mat-tab-group mat-align-tabs="start" [(selectedIndex)]="selectedIndex">
                                    <mat-tab>
                                        <ng-template mat-tab-label>
                                            <mat-icon class="example-tab-icon">article</mat-icon>
                                            Medicine Details
                                        </ng-template>
                                        <div class="row ">
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Medicine Name</mat-label>
                                                    <input type="text" matInput formControlName="medicine_name">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Generic Name</mat-label>
                                                    <input type="text" matInput formControlName="generic_name">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row ">
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Dosage Strength</mat-label>
                                                    <input type="text" matInput formControlName="dosage_strength">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Form</mat-label>
                                                    <input type="text" matInput formControlName="form">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row ">
                                            <div class="col-md-6">
                                                <mat-form-field fxFlex appearance="outline">
                                                    <mat-label>Medicine Type</mat-label>
                                                    <input type="text" matInput formControlName="medicine_type">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>

                                        </div>
                                        <div class="mb-3">
                                            <button type="button" class="btn btn-primary btn-icon-text float-end mt-4"
                                                (click)="nextStep()">
                                                <i class="feather icon-arrow-right-circle btn-icon-prepend"></i>
                                                Next
                                            </button>
                                        </div>
                                    </mat-tab>
                                    <mat-tab>
                                        <ng-template mat-tab-label>
                                            <mat-icon class="example-tab-icon">local_shipping</mat-icon>
                                            Supplier Details
                                        </ng-template>
                                        <div class="row ">
                                            <div class="col-md-6">
                                                <mat-form-field fxFlex appearance="outline">
                                                    <mat-label>Supplier Name</mat-label>
                                                    <input type="text" matInput formControlName="supplier_name">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Contact Number</mat-label>
                                                    <input type="number" matInput formControlName="contact_number">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row ">
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Email ID</mat-label>
                                                    <input type="email" matInput formControlName="email_id">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-6">
                                                <mat-form-field fxFlex appearance="outline" color="primary">
                                                    <mat-label>Type</mat-label>
                                                    <input type="text" matInput formControlName="supplier_type">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row ">
                                            <div class="col-md-6">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Location / Country</mat-label>
                                                    <input type="text" matInput formControlName="location">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>

                                        </div>

                                        <div class="mb-3">
                                            <button type="button" class="btn btn-primary btn-icon-text float-end mt-4"
                                                (click)="nextStep()">
                                                <i class="feather icon-arrow-right-circle btn-icon-prepend"></i>
                                                Next
                                            </button>
                                            <button type="button"
                                                class="btn btn-primary btn-icon-text float-end mt-4 btn-previous"
                                                (click)="previousStep()">
                                                <i class="feather icon-arrow-left-circle btn-icon-prepend"></i>
                                                Previous
                                            </button>
                                        </div>
                                    </mat-tab>
                                    <mat-tab>
                                        <ng-template mat-tab-label>
                                            <mat-icon class="example-tab-icon">receipt</mat-icon>
                                            Purchase Details
                                        </ng-template>

                                        <div class="row ">
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline" color="warning">
                                                    <mat-label>Manufacturing Date</mat-label>
                                                    <input matInput readonly [matDatepicker]="manufacturingdate"
                                                        [formControl]="manufacturingDate" value="date"
                                                        (dateChange)="manufacturingDateVal($event)">
                                                    <mat-datepicker-toggle matSuffix
                                                        [for]="manufacturingdate"></mat-datepicker-toggle>
                                                    <mat-datepicker #manufacturingdate></mat-datepicker>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline" color="warning">
                                                    <mat-label>Expiry Date</mat-label>
                                                    <input matInput readonly [matDatepicker]="expirydate"
                                                        [formControl]="expiryDate" value="date"
                                                        (dateChange)="expiryDateDateVal($event)">
                                                    <mat-datepicker-toggle matSuffix
                                                        [for]="expirydate"></mat-datepicker-toggle>
                                                    <mat-datepicker #expirydate></mat-datepicker>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline" color="warning">
                                                    <mat-label>Delivery Date</mat-label>
                                                    <input matInput readonly [matDatepicker]="deliverydate"
                                                        [formControl]="deliveryDate" value="date"
                                                        (dateChange)="deliveryDateVal($event)">
                                                    <mat-datepicker-toggle matSuffix
                                                        [for]="deliverydate"></mat-datepicker-toggle>
                                                    <mat-datepicker #deliverydate></mat-datepicker>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row ">
                                            <div class="col-md-4">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Delivered Quantity</mat-label>
                                                    <input type="number" matInput formControlName="delivered_quantity">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Purchased Amount</mat-label>
                                                    <input type="text" matInput formControlName="purchased_amount_val"
                                                        (change)="cost($event)" OnlyNumber="true">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Threshold Limit</mat-label>
                                                    <input type="number" matInput formControlName="threshold_limit">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row"> 
                                            <div class="col-md-4">
                                                <mat-form-field fxFlex appearance="outline" color="warning">
                                                    <mat-label>Invoice Date</mat-label>
                                                    <input matInput readonly [matDatepicker]="invoicedate"
                                                        [formControl]="invoiceDate" value="date"
                                                        (dateChange)="invoiceDateVal($event)">
                                                    <mat-datepicker-toggle matSuffix
                                                        [for]="invoicedate"></mat-datepicker-toggle>
                                                    <mat-datepicker #invoicedate></mat-datepicker>
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Invoice Reference</mat-label>
                                                    <input type="text" matInput formControlName="invoice_reference">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Manufacturer Name</mat-label>
                                                    <input type="text" matInput formControlName="manufacturer_name">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div> 
                                        <div class="mb-3">
                                            <button type="button" class="btn btn-primary btn-icon-text float-end mt-4"
                                                (click)="nextStep()">
                                                <i class="feather icon-arrow-right-circle btn-icon-prepend"></i>
                                                Next
                                            </button>
                                            <button type="button"
                                                class="btn btn-primary btn-icon-text float-end mt-4 btn-previous"
                                                (click)="previousStep()">
                                                <i class="feather icon-arrow-left-circle btn-icon-prepend"></i>
                                                Previous
                                            </button>
                                        </div>
                                    </mat-tab>
                                    <mat-tab>
                                        <ng-template mat-tab-label>
                                            <mat-icon class="example-tab-icon">domain</mat-icon>
                                            Storage & Usage
                                        </ng-template>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <mat-form-field appearance="outline">
                                                    <mat-label>Batch Number</mat-label>
                                                    <input type="text" matInput formControlName="batch_number">
                                                    <mat-error>Required Field</mat-error>
                                                </mat-form-field>
                                            </div> 
                                        </div>
                                        <div class="row mt-3">
                                            <quill-editor placeholder="Usage Instructions" [modules]="quillConfig"
                                                formControlName="usage_instructions">
                                            </quill-editor>
                                        </div>

                                    </mat-tab>

                                    <mat-tab>
                                        <ng-template mat-tab-label>
                                            <mat-icon class="example-tab-icon">delete outline icon</mat-icon>
                                            Disposals
                                        </ng-template>
                                        <div class="row">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                        <th>Disposal Date</th>
                                                        <th>Available Quantity</th>
                                                        <th>Disposed Quantity</th>
                                                        <th>Contractor</th>
                                                        <th>Cost</th>
                                                        <th>Balance Quantity</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let data of disposalList">
                                                        <td>{{data.attributes.disposal_date | date:'dd-MMM-yyyy'}}</td>
                                                        <td>{{data.attributes.available_quantity}}
                                                            {{data.attributes.unit}}</td>
                                                        <td>{{data.attributes.disposed_quantity}}
                                                            {{data.attributes.unit}}</td>
                                                        <td>{{data.attributes.authorized_contractor}}</td>
                                                        <td>{{disposeCost(data.attributes.cost)}}</td>
                                                        <td>{{data.attributes.balance_quantity}}
                                                            {{data.attributes.unit}}</td>

                                                        <td>
                                                            <button type="button"
                                                                class="btn btn-primary btn-icon-text btn-xs action-btn float-end"
                                                                (click)="viewDiposal(data)">

                                                                <i class="feather icon-eye"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="mb-3">
                                            <button type="button" class="btn btn-secondary btn-icon-text float-end mt-4"
                                                (click)="Back()">
                                                <i class="feather icon-chevron-left btn-icon-prepend"></i>
                                                Back to Inventory
                                            </button>
                                            <button type="button"
                                                class="btn btn-primary btn-icon-text float-end mt-4 btn-previous"
                                                (click)="previousStep()">
                                                <i class="feather icon-arrow-left-circle btn-icon-prepend"></i>
                                                Previous
                                            </button>
                                        </div>
                                    </mat-tab>
                                </mat-tab-group>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="card">
                <div class="card-body">
                    <div class="mt-3">
                        <button class="btn btn-primary" mat-icon-button aria-label="Example icon-button with a menu">
                            {{Form.value.status}}
                        </button>
                        <button (click)="navigate()" class="btn btn-success status-btn ms-2" mat-icon-button
                            aria-label="Example icon-button with a menu">
                            <i class="feather icon-chevron-left"></i> Back to History

                        </button>
                    </div>
                    <div class="mt-3">
                        <label class="tx-11 fw-bolder mb-0 text-uppercase">Requested By:</label>
                        <p class="text-muted">{{Form.value.reporter_name}}, {{Form.value.reporter_designation}}</p>
                    </div>
                    <div class="mt-3">
                        <label class="tx-11 fw-bolder mb-0 text-uppercase">Approved By:</label>
                        <p class="text-muted">{{Form.value.approver_name}}, {{Form.value.approver_designation}}</p>
                    </div>
                    <div class="mt-3">
                        <div class="col-md-12">
                            <mat-form-field appearance="outline">
                                <mat-label>Division</mat-label>
                                <input type="text" matInput formControlName="division">
                                <mat-error>Required Field</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>